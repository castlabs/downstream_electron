/*! For license information please see downstream-electron-preload.js.LICENSE.txt */
!function(Q,U){if("object"==typeof exports&&"object"==typeof module)module.exports=U(require("electron"));else if("function"==typeof define&&define.amd)define(["electron"],U);else{var B="object"==typeof exports?U(require("electron")):U(Q.electron);for(var F in B)("object"==typeof exports?exports:Q)[F]=B[F]}}(global,(__WEBPACK_EXTERNAL_MODULE__7194__=>(()=>{var __webpack_modules__={7194:Q=>{"use strict";Q.exports=__WEBPACK_EXTERNAL_MODULE__7194__},5434:module=>{"use strict";eval("/*eslint no-console: [\"error\", { allow: [\"warn\", \"error\", \"info\"] }] */\n\n\nvar WIDEVINE_SCHEME_ID_URI = 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed';\nvar downstreamElectronFE;\nfunction serialize(obj) {\n  return JSON.stringify(obj);\n}\nfunction getWidevinePSSH(info) {\n  var manifestProtections = info.manifestInfo.protections;\n  var videoRepresentation = manifestProtections.video[0] || {};\n  if (manifestProtections.video && info.manifest.video) {\n    videoRepresentation = manifestProtections.video.filter(function (manifestProtection) {\n      return info.manifest.video.indexOf(manifestProtection.id) >= 0;\n    });\n    videoRepresentation = videoRepresentation[0] || {};\n  }\n  var protections = videoRepresentation.protections || [];\n  var widevinePSSH;\n  for (var i = 0, j = protections.length; i < j; i++) {\n    if (protections[i].schemeIdUri === WIDEVINE_SCHEME_ID_URI) {\n      widevinePSSH = protections[i].cencPSSH;\n      break;\n    }\n  }\n  return widevinePSSH;\n}\nfunction bind(scope, f) {\n  return function bindF() {\n    f.apply(scope, arguments);\n  };\n}\nfunction bindAll(scope) {\n  for (var i = 1, j = arguments.length; i < j; i++) {\n    var fName = arguments[i];\n    scope[fName] = bind(scope, scope[fName]);\n  }\n}\nfunction clonePersistentConfig(config) {\n  // deep clone the config\n  var clonedConfig = JSON.parse(JSON.stringify(config));\n  if (typeof config.serverCertificate !== 'undefined') {\n    clonedConfig.serverCertificate = config.serverCertificate;\n  }\n  if (typeof config.licenseRequest === 'function') {\n    clonedConfig.licenseRequest = config.licenseRequest;\n  }\n  if (typeof config.licenseResponse === 'function') {\n    clonedConfig.licenseResponse = config.licenseResponse;\n  }\n  return clonedConfig;\n}\n\n/**\n * @constructor\n * @namespace DownstreamElectronFE\n * @param {object} window - window object from renderer window\n * @param {Persistent} persistent - persistent helper class for creating and removing persistent session\n * @property {DownstreamElectronFE.downloads} downloads - api for downloads\n * @description\n * this a bridge class for [DownstreamElectronBE]{@link DownstreamElectronBE}\n * all methods described in ({@link DownstreamElectronFE.downloads})\n */\nfunction DownstreamElectronFE(window, persistent) {\n  this._promisesObj = {};\n  this._subscribersId = {};\n  this._promiseCounter = 0;\n  this._window = window;\n  this._persistent = persistent;\n  bindAll(this, '_processApi', '_beforeUnload');\n  this._createApiMethods('downloads', ['create', 'createPersistent', 'getFolderInfo', 'getList', 'getListWithInfo', 'getOfflineLink', 'info', 'remove', 'removeAll', 'removeAllUnfinished', 'removePersistent', 'resume', 'saveData', 'savePersistent', 'start', 'stop', 'stopAll', 'subscribe', 'unsubscribe', 'updateDownloadFolder']);\n  this._attachEvents();\n}\nDownstreamElectronFE.prototype.downloads = {};\n\n/**\n * Creates a persistent session in renderer process using external plugin defined as {@link Persistent}\n * @param {array} args - arguments\n * @param {function} resolve - should called on success\n * @param {function} reject - should called on failure\n * @returns {void}\n */\nDownstreamElectronFE.prototype.downloads.createPersistent = function (args, resolve, reject) {\n  var manifestId = args[0];\n  var config = clonePersistentConfig(args[1]);\n  var forced = args[2];\n  var scope = this;\n  if (this._persistent) {\n    this.downloads.info(manifestId).then(function (info) {\n      if (!info) {\n        reject(\"Manifest with id='\" + manifestId + \"' not found.\");\n        return;\n      }\n      var existingPersistentSessionId = info.persistent;\n      if (existingPersistentSessionId && !forced) {\n        reject('persistent session already exists:' + JSON.stringify(existingPersistentSessionId));\n      } else {\n        if (!config.pssh) {\n          config.pssh = getWidevinePSSH(info);\n        }\n        scope._persistent.createPersistentSession(config).then(function (persistentSessionId) {\n          scope.downloads.savePersistent(manifestId, persistentSessionId).then(function () {\n            if (existingPersistentSessionId) {\n              scope._persistent.removePersistentSession(existingPersistentSessionId).then(function () {\n                resolve(persistentSessionId);\n              })[\"catch\"](function () {\n                resolve(persistentSessionId);\n              });\n            } else {\n              resolve(persistentSessionId);\n            }\n          }, reject);\n        }, reject);\n      }\n    }, reject);\n  } else {\n    reject('No persistent plugin initialized');\n  }\n};\n\n/**\n * Removes a persistent session in renderer process using external plugin defined as {@link Persistent}\n * @param {array} args - arguments\n * @param {function} resolve - should called on success\n * @param {function} reject - should called on failure\n * @param {object} manifest - full information about manifest\n * @returns {void}\n */\nDownstreamElectronFE.prototype.downloads.removePersistent = function (args, resolve, reject, manifest) {\n  if (this._persistent) {\n    if (manifest && manifest.persistent) {\n      this._persistent.removePersistentSession(manifest.persistent).then(resolve, reject);\n    } else {\n      resolve();\n    }\n  } else {\n    reject('No persistent plugin initialized');\n  }\n};\n\n/**\n * Removes a manifest - this is needed on renderer process to check for existence of persistent session\n * and then remove it if necessary\n * @param {array} args - arguments\n * @param {function} resolve - should called on success\n * @param {function} reject - should called on failure\n * @param {object} manifest - full information about manifest\n * @returns {void}\n */\nDownstreamElectronFE.prototype.downloads.remove = function (args, resolve, reject, manifest) {\n  var scope = this;\n  if (this._persistent && manifest && manifest.persistent) {\n    scope._persistent.removePersistentSession(manifest.persistent).then(resolve, reject);\n  } else {\n    resolve();\n  }\n};\n\n/**\n * Removes all manifests - this is needed on renderer process to check for existence of persistent sessions\n * and then remove them if necessary\n * @param {array} args - arguments\n * @param {function} resolve - should called on success\n * @param {function} reject - should called on failure\n * @param {object} manifests - full information about all manifests\n * @returns {void}\n */\nDownstreamElectronFE.prototype.downloads.removeAll = function (args, resolve, reject, manifests) {\n  var scope = this;\n  manifests = manifests || [];\n  var filtered = manifests.filter(function (manifest) {\n    return !!manifest.persistent;\n  });\n  var persistentArr = filtered.map(function (manifest) {\n    return manifest.persistent;\n  });\n  if (this._persistent && persistentArr.length > 0) {\n    var promises = [];\n    for (var i = 0, j = persistentArr.length; i < j; i++) {\n      promises.push(scope._persistent.removePersistentSession(persistentArr[i]));\n    }\n    Promise.all(promises).then(resolve, reject);\n  } else {\n    resolve();\n  }\n};\n\n/**\n * @param {string} method - method name\n * @param {object} args - arguments\n * @param {function} originalMethod - method to ba called on renderer when main process finishes\n * @private\n * @returns {Promise} - promise\n */\nDownstreamElectronFE.prototype._apiCall = function (method, args, originalMethod) {\n  var self = this;\n  var promiseId = this._generatePromiseId();\n  var promise = new Promise(function (resolve, reject) {\n    self._promisesObj[promiseId] = {\n      resolve: resolve,\n      reject: reject,\n      method: method,\n      args: args,\n      originalMethod: originalMethod\n    };\n  });\n  var request = {};\n  request.promiseId = promiseId;\n  request.method = method;\n  request.args = serialize(args);\n  this._send(request);\n  return promise;\n};\n\n/**\n *\n * @private\n * @returns {void}\n */\nDownstreamElectronFE.prototype._attachEvents = function () {\n  this._window.downstreamElectronAPI.receive('downstreamElectronFE', this._processApi);\n  window.addEventListener('onbeforeunload', this._beforeUnload);\n};\n\n/**\n *\n * @private\n * @returns {void}\n */\nDownstreamElectronFE.prototype._beforeUnload = function () {\n  this._removeSubscribers();\n};\n\n/**\n *\n * @private\n * @param {string} namespace - namespace\n * @param {array} methods - methods name array\n * @returns {\n * void}\n */\nDownstreamElectronFE.prototype._createApiMethods = function (namespace, methods) {\n  function apiFunction(scope, name, originalMethod) {\n    return function () {\n      return scope._apiCall(name, arguments, originalMethod);\n    };\n  }\n  this[namespace] = this[namespace] || {};\n  function createApiMethod(scope, namespace, name) {\n    var originalMethod;\n    if (typeof scope[namespace][name] === 'function') {\n      originalMethod = scope[namespace][name];\n    }\n    scope[namespace][name] = apiFunction(scope, namespace + '.' + name, originalMethod);\n  }\n  for (var i = 0, j = methods.length; i < j; i++) {\n    createApiMethod(this, namespace, methods[i]);\n  }\n};\n\n/**\n * @private\n * @param {string} subscriberId - subscriber identifier\n * @param {object} err - error\n * @param {object} result - result\n * @param {boolean} subscriberFinished - information if the subscriber is the last one which helps to remove subscribers\n * for finished downloads\n * @returns {void}\n */\nDownstreamElectronFE.prototype._executeSubscriber = function (subscriberId, err, result, subscriberFinished) {\n  var subscriber = this._subscribersId[subscriberId];\n  if (subscriber) {\n    subscriber.callback(err, result);\n  } else {\n    //ignore wrong window\n  }\n  if (subscriberFinished && subscriber) {\n    this._removeLocalSubscribers(subscriber.manifestId);\n  }\n};\n\n/**\n *\n * @private\n * @returns {string} - promise identifier\n */\nDownstreamElectronFE.prototype._generatePromiseId = function () {\n  var ts = new Date().getTime();\n  var promiseId;\n  this._promiseCounter++;\n  promiseId = this._promiseCounter + '-' + ts;\n  return promiseId;\n};\n\n/**\n * @private\n * @param {object} obj - object to be processed\n * @param {object} evt - event\n * @returns {void}\n */\nDownstreamElectronFE.prototype._processApi = function (obj, evt) {\n  var promiseId = evt.promiseId;\n  var error = evt.error;\n  var result = evt.result;\n  var promiseObj = this._promisesObj[promiseId + ''];\n  function resolve(result) {\n    promiseObj.resolve(result);\n    this._removeLocalSubscribersForDefinedMethods(promiseObj.method, promiseObj.args[0] || result);\n  }\n  if (promiseObj) {\n    if (evt.status === 'OK') {\n      if (typeof promiseObj.originalMethod === 'function') {\n        promiseObj.originalMethod.call(this, promiseObj.args, resolve.bind(this), promiseObj.reject.bind(this), result);\n      } else {\n        resolve.call(this, result);\n      }\n    } else {\n      promiseObj.reject(error);\n    }\n    if (evt.subscribersId) {\n      this._saveSubscribersId(promiseObj, evt.subscribersId);\n    }\n    delete this._promisesObj[promiseId];\n  } else if (evt.subscriberId) {\n    this._executeSubscriber(evt.subscriberId, evt.err, result, evt.subscriberFinished);\n  } else {\n    //ignore different window\n  }\n};\n\n/**\n * @private\n * @returns {void}\n */\nDownstreamElectronFE.prototype._removeSubscribers = function () {\n  var request = {};\n  var subscribersId;\n  subscribersId = [];\n  for (var key in this._subscribersId) {\n    if (this._subscribersId.hasOwnProperty(key)) {\n      subscribersId.push(key);\n    }\n  }\n  request.method = 'removeSubscribers';\n  request.args = serialize([subscribersId]);\n  this._send(request);\n};\n\n/**\n * @param {string|array} manifestId - manifest identifier or array of manifests identifier\n * @private\n * @returns {void}\n */\nDownstreamElectronFE.prototype._removeLocalSubscribers = function (manifestId) {\n  var self = this;\n  if (typeof manifestId === 'string') {\n    manifestId = [manifestId];\n  } else if (manifestId instanceof Array) {\n    manifestId = manifestId.map(function (item) {\n      if (typeof item === 'string') {\n        return item;\n      } else {\n        return item.manifestInfo && item.manifestInfo.id;\n      }\n    });\n  }\n  function removeSubscribers(subscriberKey) {\n    for (var i = 0, j = manifestId.length; i < j; i++) {\n      if (typeof self._subscribersId[subscriberKey].manifestId === 'string') {\n        if (self._subscribersId[subscriberKey].manifestId === manifestId[i]) {\n          delete self._subscribersId[subscriberKey];\n          break;\n        }\n      } else {\n        var pos = self._subscribersId[subscriberKey].manifestId.indexOf(manifestId[i]);\n        if (pos >= 0) {\n          self._subscribersId[subscriberKey].manifestId.splice(pos, 1);\n        }\n        if (!self._subscribersId[subscriberKey].manifestId.length) {\n          delete self._subscribersId[subscriberKey];\n          break;\n        }\n      }\n    }\n  }\n  if (manifestId) {\n    for (var key in this._subscribersId) {\n      if (this._subscribersId.hasOwnProperty(key)) {\n        removeSubscribers(key);\n      }\n    }\n  } else {\n    this._subscribersId = {};\n  }\n};\n\n/**\n *\n * @param {string} method - method name\n * @param {string|array} manifestId - manifest identifier or array of manifests identifier\n * @private\n * @returns {void}\n */\nDownstreamElectronFE.prototype._removeLocalSubscribersForDefinedMethods = function (method, manifestId) {\n  var methods = ['downloads.stop', 'downloads.stopAll', 'downloads.remove', 'downloads.removeAll', 'downloads.removeAllUnfinished', 'downloads.unsubscribe'];\n  // remove all subscribers when user removes or stop all\n  if (method === 'downloads.removeAll' || method === 'downloads.stopAll') {\n    manifestId = undefined;\n  }\n  for (var i = 0, j = methods.length; i < j; i++) {\n    if (method === methods[i]) {\n      this._removeLocalSubscribers(manifestId);\n      break;\n    }\n  }\n};\n/**\n * @param {Promise} promise - promise\n * @param {string} subscribersId - subscriber identifier\n * @private\n * @returns {void}\n */\nDownstreamElectronFE.prototype._saveSubscribersId = function (promise, subscribersId) {\n  var i, j;\n  if (typeof subscribersId === 'string' || typeof subscribersId === 'number') {\n    subscribersId = [String(subscribersId)];\n  }\n  for (i = 0, j = subscribersId.length; i < j; i++) {\n    this._subscribersId[subscribersId[i]] = {\n      manifestId: promise.args[0],\n      callback: promise.args[2 + i]\n    };\n  }\n};\n\n/**\n * @param {object} request - request\n * @private\n * @returns {void}\n */\nDownstreamElectronFE.prototype._send = function (request) {\n  try {\n    this._window.downstreamElectronAPI.send('downstreamElectronBE', request);\n  } catch (e) {\n    console.error(e);\n  }\n};\n\n//---------------------------\nmodule.exports = {\n  /**\n   * @function\n   * @name DownstreamElectronFE#init\n   * @param {object} window - window object from renderer window\n   * @param {Persistent} persistent - persistent helper class for creating and removing persistent session\n   * @description\n   * initialize the api in render process\n   * @returns {DownstreamElectronFE} DownstreamElectronFE\n   * @example\n   * // somewhere in the renderer process\n   * // this is example based on persistent plugin from {@link https://castlabs.com/products/prestoplay-desktop/|PRESTOplay for Desktops},\n   * // you can create its own too, for details click on >> {@link Persistent} <<\n   * const persistent = require('./clpp_persistent.plugin.min');\n   * const downstreamElectron = require(\"downstream-electron\").init(window, persistent);\n   */\n  init: function init(window, persistent) {\n    if (!downstreamElectronFE) {\n      downstreamElectronFE = new DownstreamElectronFE(window, persistent);\n    }\n    return downstreamElectronFE;\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDa0IsQ0FBQyxDQUFDO0VBQ2xCO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBRSxNQUFNLENBQUNDLE9BQU8sR0FBRztFQUNmO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFQyxJQUFJLEVBQUUsU0FBQUEsS0FBVXpGLE1BQU0sRUFBRUMsVUFBVSxFQUFFO0lBQ2xDLElBQUksQ0FBQ3hDLG9CQUFvQixFQUFFO01BQ3pCQSxvQkFBb0IsR0FBRyxJQUFJc0Msb0JBQW9CLENBQUNDLE1BQU0sRUFBRUMsVUFBVSxDQUFDO0lBQ3JFO0lBQ0EsT0FBT3hDLG9CQUFvQjtFQUM3QjtBQUNGLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb3duc3RyZWFtLWVsZWN0cm9uLy4vYXBpL2Rvd25zdHJlYW0tZWxlY3Ryb24tZmUuanM/YjZjYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKmVzbGludCBuby1jb25zb2xlOiBbXCJlcnJvclwiLCB7IGFsbG93OiBbXCJ3YXJuXCIsIFwiZXJyb3JcIiwgXCJpbmZvXCJdIH1dICovXG4ndXNlIHN0cmljdCc7XG5jb25zdCBXSURFVklORV9TQ0hFTUVfSURfVVJJID0gJ3Vybjp1dWlkOmVkZWY4YmE5LTc5ZDYtNGFjZS1hM2M4LTI3ZGNkNTFkMjFlZCc7XG5cbmxldCBkb3duc3RyZWFtRWxlY3Ryb25GRTtcblxuZnVuY3Rpb24gc2VyaWFsaXplIChvYmopIHtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaik7XG59XG5cbmZ1bmN0aW9uIGdldFdpZGV2aW5lUFNTSCAoaW5mbykge1xuICBjb25zdCBtYW5pZmVzdFByb3RlY3Rpb25zID0gaW5mby5tYW5pZmVzdEluZm8ucHJvdGVjdGlvbnM7XG4gIGxldCB2aWRlb1JlcHJlc2VudGF0aW9uID0gbWFuaWZlc3RQcm90ZWN0aW9ucy52aWRlb1swXSB8fCB7fTtcbiAgaWYgKG1hbmlmZXN0UHJvdGVjdGlvbnMudmlkZW8gJiYgaW5mby5tYW5pZmVzdC52aWRlbykge1xuICAgIHZpZGVvUmVwcmVzZW50YXRpb24gPSBtYW5pZmVzdFByb3RlY3Rpb25zLnZpZGVvLmZpbHRlcihmdW5jdGlvbiAobWFuaWZlc3RQcm90ZWN0aW9uKSB7XG4gICAgICByZXR1cm4gaW5mby5tYW5pZmVzdC52aWRlby5pbmRleE9mKG1hbmlmZXN0UHJvdGVjdGlvbi5pZCkgPj0gMDtcbiAgICB9KTtcbiAgICB2aWRlb1JlcHJlc2VudGF0aW9uID0gdmlkZW9SZXByZXNlbnRhdGlvblswXSB8fCB7fTtcbiAgfVxuXG4gIGNvbnN0IHByb3RlY3Rpb25zID0gdmlkZW9SZXByZXNlbnRhdGlvbi5wcm90ZWN0aW9ucyB8fCBbXTtcbiAgbGV0IHdpZGV2aW5lUFNTSDtcbiAgZm9yIChsZXQgaSA9IDAsIGogPSBwcm90ZWN0aW9ucy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBpZiAocHJvdGVjdGlvbnNbaV0uc2NoZW1lSWRVcmkgPT09IFdJREVWSU5FX1NDSEVNRV9JRF9VUkkpIHtcbiAgICAgIHdpZGV2aW5lUFNTSCA9IHByb3RlY3Rpb25zW2ldLmNlbmNQU1NIO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiB3aWRldmluZVBTU0g7XG59XG5cbmZ1bmN0aW9uIGJpbmQgKHNjb3BlLCBmKSB7XG4gIHJldHVybiBmdW5jdGlvbiBiaW5kRiAoKSB7XG4gICAgZi5hcHBseShzY29wZSwgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYmluZEFsbCAoc2NvcGUpIHtcbiAgZm9yIChsZXQgaSA9IDEsIGogPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgbGV0IGZOYW1lID0gYXJndW1lbnRzW2ldO1xuICAgIHNjb3BlW2ZOYW1lXSA9IGJpbmQoc2NvcGUsIHNjb3BlW2ZOYW1lXSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xvbmVQZXJzaXN0ZW50Q29uZmlnIChjb25maWcpIHtcbiAgLy8gZGVlcCBjbG9uZSB0aGUgY29uZmlnXG4gIGNvbnN0IGNsb25lZENvbmZpZyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uZmlnKSk7XG4gIGlmICh0eXBlb2YgY29uZmlnLnNlcnZlckNlcnRpZmljYXRlICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNsb25lZENvbmZpZy5zZXJ2ZXJDZXJ0aWZpY2F0ZSA9IGNvbmZpZy5zZXJ2ZXJDZXJ0aWZpY2F0ZTtcbiAgfVxuICBpZiAodHlwZW9mIGNvbmZpZy5saWNlbnNlUmVxdWVzdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNsb25lZENvbmZpZy5saWNlbnNlUmVxdWVzdCA9IGNvbmZpZy5saWNlbnNlUmVxdWVzdDtcbiAgfVxuICBpZiAodHlwZW9mIGNvbmZpZy5saWNlbnNlUmVzcG9uc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjbG9uZWRDb25maWcubGljZW5zZVJlc3BvbnNlID0gY29uZmlnLmxpY2Vuc2VSZXNwb25zZTtcbiAgfVxuXG4gIHJldHVybiBjbG9uZWRDb25maWc7XG59XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAbmFtZXNwYWNlIERvd25zdHJlYW1FbGVjdHJvbkZFXG4gKiBAcGFyYW0ge29iamVjdH0gd2luZG93IC0gd2luZG93IG9iamVjdCBmcm9tIHJlbmRlcmVyIHdpbmRvd1xuICogQHBhcmFtIHtQZXJzaXN0ZW50fSBwZXJzaXN0ZW50IC0gcGVyc2lzdGVudCBoZWxwZXIgY2xhc3MgZm9yIGNyZWF0aW5nIGFuZCByZW1vdmluZyBwZXJzaXN0ZW50IHNlc3Npb25cbiAqIEBwcm9wZXJ0eSB7RG93bnN0cmVhbUVsZWN0cm9uRkUuZG93bmxvYWRzfSBkb3dubG9hZHMgLSBhcGkgZm9yIGRvd25sb2Fkc1xuICogQGRlc2NyaXB0aW9uXG4gKiB0aGlzIGEgYnJpZGdlIGNsYXNzIGZvciBbRG93bnN0cmVhbUVsZWN0cm9uQkVde0BsaW5rIERvd25zdHJlYW1FbGVjdHJvbkJFfVxuICogYWxsIG1ldGhvZHMgZGVzY3JpYmVkIGluICh7QGxpbmsgRG93bnN0cmVhbUVsZWN0cm9uRkUuZG93bmxvYWRzfSlcbiAqL1xuZnVuY3Rpb24gRG93bnN0cmVhbUVsZWN0cm9uRkUgKHdpbmRvdywgcGVyc2lzdGVudCkge1xuICB0aGlzLl9wcm9taXNlc09iaiA9IHt9O1xuICB0aGlzLl9zdWJzY3JpYmVyc0lkID0ge307XG4gIHRoaXMuX3Byb21pc2VDb3VudGVyID0gMDtcbiAgdGhpcy5fd2luZG93ID0gd2luZG93O1xuICB0aGlzLl9wZXJzaXN0ZW50ID0gcGVyc2lzdGVudDtcbiAgYmluZEFsbCh0aGlzLCAnX3Byb2Nlc3NBcGknLCAnX2JlZm9yZVVubG9hZCcpO1xuXG4gIHRoaXMuX2NyZWF0ZUFwaU1ldGhvZHMoJ2Rvd25sb2FkcycsIFtcbiAgICAnY3JlYXRlJyxcbiAgICAnY3JlYXRlUGVyc2lzdGVudCcsXG4gICAgJ2dldEZvbGRlckluZm8nLFxuICAgICdnZXRMaXN0JyxcbiAgICAnZ2V0TGlzdFdpdGhJbmZvJyxcbiAgICAnZ2V0T2ZmbGluZUxpbmsnLFxuICAgICdpbmZvJyxcbiAgICAncmVtb3ZlJyxcbiAgICAncmVtb3ZlQWxsJyxcbiAgICAncmVtb3ZlQWxsVW5maW5pc2hlZCcsXG4gICAgJ3JlbW92ZVBlcnNpc3RlbnQnLFxuICAgICdyZXN1bWUnLFxuICAgICdzYXZlRGF0YScsXG4gICAgJ3NhdmVQZXJzaXN0ZW50JyxcbiAgICAnc3RhcnQnLFxuICAgICdzdG9wJyxcbiAgICAnc3RvcEFsbCcsXG4gICAgJ3N1YnNjcmliZScsXG4gICAgJ3Vuc3Vic2NyaWJlJyxcbiAgICAndXBkYXRlRG93bmxvYWRGb2xkZXInXG4gIF0pO1xuICB0aGlzLl9hdHRhY2hFdmVudHMoKTtcbn1cblxuRG93bnN0cmVhbUVsZWN0cm9uRkUucHJvdG90eXBlLmRvd25sb2FkcyA9IHt9O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBwZXJzaXN0ZW50IHNlc3Npb24gaW4gcmVuZGVyZXIgcHJvY2VzcyB1c2luZyBleHRlcm5hbCBwbHVnaW4gZGVmaW5lZCBhcyB7QGxpbmsgUGVyc2lzdGVudH1cbiAqIEBwYXJhbSB7YXJyYXl9IGFyZ3MgLSBhcmd1bWVudHNcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmUgLSBzaG91bGQgY2FsbGVkIG9uIHN1Y2Nlc3NcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHJlamVjdCAtIHNob3VsZCBjYWxsZWQgb24gZmFpbHVyZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25zdHJlYW1FbGVjdHJvbkZFLnByb3RvdHlwZS5kb3dubG9hZHMuY3JlYXRlUGVyc2lzdGVudCA9IGZ1bmN0aW9uIChhcmdzLCByZXNvbHZlLCByZWplY3QpIHtcbiAgY29uc3QgbWFuaWZlc3RJZCA9IGFyZ3NbMF07XG4gIGNvbnN0IGNvbmZpZyA9IGNsb25lUGVyc2lzdGVudENvbmZpZyhhcmdzWzFdKTtcbiAgY29uc3QgZm9yY2VkID0gYXJnc1syXTtcbiAgY29uc3Qgc2NvcGUgPSB0aGlzO1xuICBpZiAodGhpcy5fcGVyc2lzdGVudCkge1xuICAgIHRoaXMuZG93bmxvYWRzLmluZm8obWFuaWZlc3RJZCkudGhlbihmdW5jdGlvbiAoaW5mbykge1xuICAgICAgaWYgKCFpbmZvKSB7XG4gICAgICAgIHJlamVjdChcIk1hbmlmZXN0IHdpdGggaWQ9J1wiICsgbWFuaWZlc3RJZCArIFwiJyBub3QgZm91bmQuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBleGlzdGluZ1BlcnNpc3RlbnRTZXNzaW9uSWQgPSBpbmZvLnBlcnNpc3RlbnQ7XG4gICAgICBpZiAoZXhpc3RpbmdQZXJzaXN0ZW50U2Vzc2lvbklkICYmICFmb3JjZWQpIHtcbiAgICAgICAgcmVqZWN0KCdwZXJzaXN0ZW50IHNlc3Npb24gYWxyZWFkeSBleGlzdHM6JyArIEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nUGVyc2lzdGVudFNlc3Npb25JZCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFjb25maWcucHNzaCkge1xuICAgICAgICAgIGNvbmZpZy5wc3NoID0gZ2V0V2lkZXZpbmVQU1NIKGluZm8pO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NvcGUuX3BlcnNpc3RlbnQuY3JlYXRlUGVyc2lzdGVudFNlc3Npb24oY29uZmlnKS50aGVuKGZ1bmN0aW9uIChwZXJzaXN0ZW50U2Vzc2lvbklkKSB7XG4gICAgICAgICAgc2NvcGUuZG93bmxvYWRzLnNhdmVQZXJzaXN0ZW50KG1hbmlmZXN0SWQsIHBlcnNpc3RlbnRTZXNzaW9uSWQpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nUGVyc2lzdGVudFNlc3Npb25JZCkge1xuICAgICAgICAgICAgICBzY29wZS5fcGVyc2lzdGVudC5yZW1vdmVQZXJzaXN0ZW50U2Vzc2lvbihleGlzdGluZ1BlcnNpc3RlbnRTZXNzaW9uSWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwZXJzaXN0ZW50U2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKHBlcnNpc3RlbnRTZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShwZXJzaXN0ZW50U2Vzc2lvbklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9LCByZWplY3QpO1xuICAgICAgfVxuICAgIH0sIHJlamVjdCk7XG4gIH0gZWxzZSB7XG4gICAgcmVqZWN0KCdObyBwZXJzaXN0ZW50IHBsdWdpbiBpbml0aWFsaXplZCcpO1xuICB9XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYSBwZXJzaXN0ZW50IHNlc3Npb24gaW4gcmVuZGVyZXIgcHJvY2VzcyB1c2luZyBleHRlcm5hbCBwbHVnaW4gZGVmaW5lZCBhcyB7QGxpbmsgUGVyc2lzdGVudH1cbiAqIEBwYXJhbSB7YXJyYXl9IGFyZ3MgLSBhcmd1bWVudHNcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmUgLSBzaG91bGQgY2FsbGVkIG9uIHN1Y2Nlc3NcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHJlamVjdCAtIHNob3VsZCBjYWxsZWQgb24gZmFpbHVyZVxuICogQHBhcmFtIHtvYmplY3R9IG1hbmlmZXN0IC0gZnVsbCBpbmZvcm1hdGlvbiBhYm91dCBtYW5pZmVzdFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25zdHJlYW1FbGVjdHJvbkZFLnByb3RvdHlwZS5kb3dubG9hZHMucmVtb3ZlUGVyc2lzdGVudCA9IGZ1bmN0aW9uIChhcmdzLCByZXNvbHZlLCByZWplY3QsIG1hbmlmZXN0KSB7XG4gIGlmICh0aGlzLl9wZXJzaXN0ZW50KSB7XG4gICAgaWYgKG1hbmlmZXN0ICYmIG1hbmlmZXN0LnBlcnNpc3RlbnQpIHtcbiAgICAgIHRoaXMuX3BlcnNpc3RlbnQucmVtb3ZlUGVyc2lzdGVudFNlc3Npb24obWFuaWZlc3QucGVyc2lzdGVudCkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlamVjdCgnTm8gcGVyc2lzdGVudCBwbHVnaW4gaW5pdGlhbGl6ZWQnKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmVzIGEgbWFuaWZlc3QgLSB0aGlzIGlzIG5lZWRlZCBvbiByZW5kZXJlciBwcm9jZXNzIHRvIGNoZWNrIGZvciBleGlzdGVuY2Ugb2YgcGVyc2lzdGVudCBzZXNzaW9uXG4gKiBhbmQgdGhlbiByZW1vdmUgaXQgaWYgbmVjZXNzYXJ5XG4gKiBAcGFyYW0ge2FycmF5fSBhcmdzIC0gYXJndW1lbnRzXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlIC0gc2hvdWxkIGNhbGxlZCBvbiBzdWNjZXNzXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSByZWplY3QgLSBzaG91bGQgY2FsbGVkIG9uIGZhaWx1cmVcbiAqIEBwYXJhbSB7b2JqZWN0fSBtYW5pZmVzdCAtIGZ1bGwgaW5mb3JtYXRpb24gYWJvdXQgbWFuaWZlc3RcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3duc3RyZWFtRWxlY3Ryb25GRS5wcm90b3R5cGUuZG93bmxvYWRzLnJlbW92ZSA9IGZ1bmN0aW9uIChhcmdzLCByZXNvbHZlLCByZWplY3QsIG1hbmlmZXN0KSB7XG4gIGNvbnN0IHNjb3BlID0gdGhpcztcbiAgaWYgKHRoaXMuX3BlcnNpc3RlbnQgJiYgbWFuaWZlc3QgJiYgbWFuaWZlc3QucGVyc2lzdGVudCkge1xuICAgIHNjb3BlLl9wZXJzaXN0ZW50LnJlbW92ZVBlcnNpc3RlbnRTZXNzaW9uKG1hbmlmZXN0LnBlcnNpc3RlbnQpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgfSBlbHNlIHtcbiAgICByZXNvbHZlKCk7XG4gIH1cbn07XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgbWFuaWZlc3RzIC0gdGhpcyBpcyBuZWVkZWQgb24gcmVuZGVyZXIgcHJvY2VzcyB0byBjaGVjayBmb3IgZXhpc3RlbmNlIG9mIHBlcnNpc3RlbnQgc2Vzc2lvbnNcbiAqIGFuZCB0aGVuIHJlbW92ZSB0aGVtIGlmIG5lY2Vzc2FyeVxuICogQHBhcmFtIHthcnJheX0gYXJncyAtIGFyZ3VtZW50c1xuICogQHBhcmFtIHtmdW5jdGlvbn0gcmVzb2x2ZSAtIHNob3VsZCBjYWxsZWQgb24gc3VjY2Vzc1xuICogQHBhcmFtIHtmdW5jdGlvbn0gcmVqZWN0IC0gc2hvdWxkIGNhbGxlZCBvbiBmYWlsdXJlXG4gKiBAcGFyYW0ge29iamVjdH0gbWFuaWZlc3RzIC0gZnVsbCBpbmZvcm1hdGlvbiBhYm91dCBhbGwgbWFuaWZlc3RzXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uRkUucHJvdG90eXBlLmRvd25sb2Fkcy5yZW1vdmVBbGwgPSBmdW5jdGlvbiAoYXJncywgcmVzb2x2ZSwgcmVqZWN0LCBtYW5pZmVzdHMpIHtcbiAgY29uc3Qgc2NvcGUgPSB0aGlzO1xuICBtYW5pZmVzdHMgPSBtYW5pZmVzdHMgfHwgW107XG4gIGNvbnN0IGZpbHRlcmVkID0gbWFuaWZlc3RzLmZpbHRlcihmdW5jdGlvbiAobWFuaWZlc3QpIHtcbiAgICByZXR1cm4gISFtYW5pZmVzdC5wZXJzaXN0ZW50O1xuICB9KTtcbiAgY29uc3QgcGVyc2lzdGVudEFyciA9IGZpbHRlcmVkLm1hcChmdW5jdGlvbiAobWFuaWZlc3QpIHtcbiAgICByZXR1cm4gbWFuaWZlc3QucGVyc2lzdGVudDtcbiAgfSk7XG5cbiAgaWYgKHRoaXMuX3BlcnNpc3RlbnQgJiYgcGVyc2lzdGVudEFyci5sZW5ndGggPiAwKSB7XG4gICAgbGV0IHByb21pc2VzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSBwZXJzaXN0ZW50QXJyLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgcHJvbWlzZXMucHVzaChzY29wZS5fcGVyc2lzdGVudC5yZW1vdmVQZXJzaXN0ZW50U2Vzc2lvbihwZXJzaXN0ZW50QXJyW2ldKSk7XG4gICAgfVxuICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gIH0gZWxzZSB7XG4gICAgcmVzb2x2ZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgLSBtZXRob2QgbmFtZVxuICogQHBhcmFtIHtvYmplY3R9IGFyZ3MgLSBhcmd1bWVudHNcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG9yaWdpbmFsTWV0aG9kIC0gbWV0aG9kIHRvIGJhIGNhbGxlZCBvbiByZW5kZXJlciB3aGVuIG1haW4gcHJvY2VzcyBmaW5pc2hlc1xuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHtQcm9taXNlfSAtIHByb21pc2VcbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uRkUucHJvdG90eXBlLl9hcGlDYWxsID0gZnVuY3Rpb24gKG1ldGhvZCwgYXJncywgb3JpZ2luYWxNZXRob2QpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIGNvbnN0IHByb21pc2VJZCA9IHRoaXMuX2dlbmVyYXRlUHJvbWlzZUlkKCk7XG4gIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgc2VsZi5fcHJvbWlzZXNPYmpbcHJvbWlzZUlkXSA9IHtcbiAgICAgIHJlc29sdmU6IHJlc29sdmUsXG4gICAgICByZWplY3Q6IHJlamVjdCxcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgYXJnczogYXJncyxcbiAgICAgIG9yaWdpbmFsTWV0aG9kOiBvcmlnaW5hbE1ldGhvZFxuICAgIH07XG4gIH0pO1xuICBsZXQgcmVxdWVzdCA9IHt9O1xuICByZXF1ZXN0LnByb21pc2VJZCA9IHByb21pc2VJZDtcbiAgcmVxdWVzdC5tZXRob2QgPSBtZXRob2Q7XG4gIHJlcXVlc3QuYXJncyA9IHNlcmlhbGl6ZShhcmdzKTtcbiAgdGhpcy5fc2VuZChyZXF1ZXN0KTtcbiAgcmV0dXJuIHByb21pc2U7XG59O1xuXG4vKipcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25zdHJlYW1FbGVjdHJvbkZFLnByb3RvdHlwZS5fYXR0YWNoRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl93aW5kb3cuZG93bnN0cmVhbUVsZWN0cm9uQVBJLnJlY2VpdmUoJ2Rvd25zdHJlYW1FbGVjdHJvbkZFJywgdGhpcy5fcHJvY2Vzc0FwaSk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvbmJlZm9yZXVubG9hZCcsIHRoaXMuX2JlZm9yZVVubG9hZCk7XG59O1xuXG4vKipcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25zdHJlYW1FbGVjdHJvbkZFLnByb3RvdHlwZS5fYmVmb3JlVW5sb2FkID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9yZW1vdmVTdWJzY3JpYmVycygpO1xufTtcblxuLyoqXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lc3BhY2UgLSBuYW1lc3BhY2VcbiAqIEBwYXJhbSB7YXJyYXl9IG1ldGhvZHMgLSBtZXRob2RzIG5hbWUgYXJyYXlcbiAqIEByZXR1cm5zIHtcbiAqIHZvaWR9XG4gKi9cbkRvd25zdHJlYW1FbGVjdHJvbkZFLnByb3RvdHlwZS5fY3JlYXRlQXBpTWV0aG9kcyA9IGZ1bmN0aW9uIChuYW1lc3BhY2UsIG1ldGhvZHMpIHtcbiAgZnVuY3Rpb24gYXBpRnVuY3Rpb24gKHNjb3BlLCBuYW1lLCBvcmlnaW5hbE1ldGhvZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gc2NvcGUuX2FwaUNhbGwobmFtZSwgYXJndW1lbnRzLCBvcmlnaW5hbE1ldGhvZCk7XG4gICAgfTtcbiAgfVxuXG4gIHRoaXNbbmFtZXNwYWNlXSA9IHRoaXNbbmFtZXNwYWNlXSB8fCB7fTtcblxuICBmdW5jdGlvbiBjcmVhdGVBcGlNZXRob2QgKHNjb3BlLCBuYW1lc3BhY2UsIG5hbWUpIHtcbiAgICBsZXQgb3JpZ2luYWxNZXRob2Q7XG4gICAgaWYgKHR5cGVvZiBzY29wZVtuYW1lc3BhY2VdW25hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBvcmlnaW5hbE1ldGhvZCA9IHNjb3BlW25hbWVzcGFjZV1bbmFtZV07XG4gICAgfVxuICAgIHNjb3BlW25hbWVzcGFjZV1bbmFtZV0gPSBhcGlGdW5jdGlvbihzY29wZSwgbmFtZXNwYWNlICsgJy4nICsgbmFtZSwgb3JpZ2luYWxNZXRob2QpO1xuICB9XG5cbiAgZm9yIChsZXQgaSA9IDAsIGogPSBtZXRob2RzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgIGNyZWF0ZUFwaU1ldGhvZCh0aGlzLCBuYW1lc3BhY2UsIG1ldGhvZHNbaV0pO1xuICB9XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaWJlcklkIC0gc3Vic2NyaWJlciBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge29iamVjdH0gZXJyIC0gZXJyb3JcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXN1bHQgLSByZXN1bHRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc3Vic2NyaWJlckZpbmlzaGVkIC0gaW5mb3JtYXRpb24gaWYgdGhlIHN1YnNjcmliZXIgaXMgdGhlIGxhc3Qgb25lIHdoaWNoIGhlbHBzIHRvIHJlbW92ZSBzdWJzY3JpYmVyc1xuICogZm9yIGZpbmlzaGVkIGRvd25sb2Fkc1xuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25zdHJlYW1FbGVjdHJvbkZFLnByb3RvdHlwZS5fZXhlY3V0ZVN1YnNjcmliZXIgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcklkLCBlcnIsIHJlc3VsdCwgc3Vic2NyaWJlckZpbmlzaGVkKSB7XG4gIGNvbnN0IHN1YnNjcmliZXIgPSB0aGlzLl9zdWJzY3JpYmVyc0lkW3N1YnNjcmliZXJJZF07XG4gIGlmIChzdWJzY3JpYmVyKSB7XG4gICAgc3Vic2NyaWJlci5jYWxsYmFjayhlcnIsIHJlc3VsdCk7XG4gIH0gZWxzZSB7XG4gICAgLy9pZ25vcmUgd3Jvbmcgd2luZG93XG4gIH1cbiAgaWYgKHN1YnNjcmliZXJGaW5pc2hlZCAmJiBzdWJzY3JpYmVyKSB7XG4gICAgdGhpcy5fcmVtb3ZlTG9jYWxTdWJzY3JpYmVycyhzdWJzY3JpYmVyLm1hbmlmZXN0SWQpO1xuICB9XG59O1xuXG4vKipcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3N0cmluZ30gLSBwcm9taXNlIGlkZW50aWZpZXJcbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uRkUucHJvdG90eXBlLl9nZW5lcmF0ZVByb21pc2VJZCA9IGZ1bmN0aW9uICgpIHtcbiAgbGV0IHRzID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIGxldCBwcm9taXNlSWQ7XG4gIHRoaXMuX3Byb21pc2VDb3VudGVyKys7XG4gIHByb21pc2VJZCA9IHRoaXMuX3Byb21pc2VDb3VudGVyICsgJy0nICsgdHM7XG4gIHJldHVybiBwcm9taXNlSWQ7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge29iamVjdH0gb2JqIC0gb2JqZWN0IHRvIGJlIHByb2Nlc3NlZFxuICogQHBhcmFtIHtvYmplY3R9IGV2dCAtIGV2ZW50XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uRkUucHJvdG90eXBlLl9wcm9jZXNzQXBpID0gZnVuY3Rpb24gKG9iaiwgZXZ0KSB7XG4gIGNvbnN0IHByb21pc2VJZCA9IGV2dC5wcm9taXNlSWQ7XG4gIGNvbnN0IGVycm9yID0gZXZ0LmVycm9yO1xuICBjb25zdCByZXN1bHQgPSBldnQucmVzdWx0O1xuICBjb25zdCBwcm9taXNlT2JqID0gdGhpcy5fcHJvbWlzZXNPYmpbcHJvbWlzZUlkICsgJyddO1xuXG4gIGZ1bmN0aW9uIHJlc29sdmUgKHJlc3VsdCkge1xuICAgIHByb21pc2VPYmoucmVzb2x2ZShyZXN1bHQpO1xuICAgIHRoaXMuX3JlbW92ZUxvY2FsU3Vic2NyaWJlcnNGb3JEZWZpbmVkTWV0aG9kcyhwcm9taXNlT2JqLm1ldGhvZCwgcHJvbWlzZU9iai5hcmdzWzBdIHx8IHJlc3VsdCk7XG4gIH1cblxuICBpZiAocHJvbWlzZU9iaikge1xuICAgIGlmIChldnQuc3RhdHVzID09PSAnT0snKSB7XG4gICAgICBpZiAodHlwZW9mIHByb21pc2VPYmoub3JpZ2luYWxNZXRob2QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcHJvbWlzZU9iai5vcmlnaW5hbE1ldGhvZC5jYWxsKHRoaXMsIHByb21pc2VPYmouYXJncywgcmVzb2x2ZS5iaW5kKHRoaXMpLCBwcm9taXNlT2JqLnJlamVjdC5iaW5kKHRoaXMpLCByZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZS5jYWxsKHRoaXMsIHJlc3VsdCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb21pc2VPYmoucmVqZWN0KGVycm9yKTtcbiAgICB9XG4gICAgaWYgKGV2dC5zdWJzY3JpYmVyc0lkKSB7XG4gICAgICB0aGlzLl9zYXZlU3Vic2NyaWJlcnNJZChwcm9taXNlT2JqLCBldnQuc3Vic2NyaWJlcnNJZCk7XG4gICAgfVxuICAgIGRlbGV0ZSAodGhpcy5fcHJvbWlzZXNPYmpbcHJvbWlzZUlkXSk7XG4gIH0gZWxzZSBpZiAoZXZ0LnN1YnNjcmliZXJJZCkge1xuICAgIHRoaXMuX2V4ZWN1dGVTdWJzY3JpYmVyKGV2dC5zdWJzY3JpYmVySWQsIGV2dC5lcnIsIHJlc3VsdCwgZXZ0LnN1YnNjcmliZXJGaW5pc2hlZCk7XG4gIH0gZWxzZSB7XG4gICAgLy9pZ25vcmUgZGlmZmVyZW50IHdpbmRvd1xuICB9XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uRkUucHJvdG90eXBlLl9yZW1vdmVTdWJzY3JpYmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgbGV0IHJlcXVlc3QgPSB7fTtcbiAgbGV0IHN1YnNjcmliZXJzSWQ7XG4gIHN1YnNjcmliZXJzSWQgPSBbXTtcbiAgZm9yIChsZXQga2V5IGluIHRoaXMuX3N1YnNjcmliZXJzSWQpIHtcbiAgICBpZiAodGhpcy5fc3Vic2NyaWJlcnNJZC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBzdWJzY3JpYmVyc0lkLnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmVxdWVzdC5tZXRob2QgPSAncmVtb3ZlU3Vic2NyaWJlcnMnO1xuICByZXF1ZXN0LmFyZ3MgPSBzZXJpYWxpemUoW3N1YnNjcmliZXJzSWRdKTtcblxuICB0aGlzLl9zZW5kKHJlcXVlc3QpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ3xhcnJheX0gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXIgb3IgYXJyYXkgb2YgbWFuaWZlc3RzIGlkZW50aWZpZXJcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uRkUucHJvdG90eXBlLl9yZW1vdmVMb2NhbFN1YnNjcmliZXJzID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIGlmICh0eXBlb2YgbWFuaWZlc3RJZCA9PT0gJ3N0cmluZycpIHtcbiAgICBtYW5pZmVzdElkID0gW21hbmlmZXN0SWRdO1xuICB9IGVsc2UgaWYgKG1hbmlmZXN0SWQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIG1hbmlmZXN0SWQgPSBtYW5pZmVzdElkLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpdGVtLm1hbmlmZXN0SW5mbyAmJiBpdGVtLm1hbmlmZXN0SW5mby5pZDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZVN1YnNjcmliZXJzIChzdWJzY3JpYmVyS2V5KSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSBtYW5pZmVzdElkLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgaWYgKHR5cGVvZiBzZWxmLl9zdWJzY3JpYmVyc0lkW3N1YnNjcmliZXJLZXldLm1hbmlmZXN0SWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmIChzZWxmLl9zdWJzY3JpYmVyc0lkW3N1YnNjcmliZXJLZXldLm1hbmlmZXN0SWQgPT09IG1hbmlmZXN0SWRbaV0pIHtcbiAgICAgICAgICBkZWxldGUgKHNlbGYuX3N1YnNjcmliZXJzSWRbc3Vic2NyaWJlcktleV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgcG9zID0gc2VsZi5fc3Vic2NyaWJlcnNJZFtzdWJzY3JpYmVyS2V5XS5tYW5pZmVzdElkLmluZGV4T2YobWFuaWZlc3RJZFtpXSk7XG4gICAgICAgIGlmIChwb3MgPj0gMCkge1xuICAgICAgICAgIHNlbGYuX3N1YnNjcmliZXJzSWRbc3Vic2NyaWJlcktleV0ubWFuaWZlc3RJZC5zcGxpY2UocG9zLCAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlbGYuX3N1YnNjcmliZXJzSWRbc3Vic2NyaWJlcktleV0ubWFuaWZlc3RJZC5sZW5ndGgpIHtcbiAgICAgICAgICBkZWxldGUgKHNlbGYuX3N1YnNjcmliZXJzSWRbc3Vic2NyaWJlcktleV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKG1hbmlmZXN0SWQpIHtcbiAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5fc3Vic2NyaWJlcnNJZCkge1xuICAgICAgaWYgKHRoaXMuX3N1YnNjcmliZXJzSWQuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICByZW1vdmVTdWJzY3JpYmVycyhrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9zdWJzY3JpYmVyc0lkID0ge307XG4gIH1cbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgLSBtZXRob2QgbmFtZVxuICogQHBhcmFtIHtzdHJpbmd8YXJyYXl9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyIG9yIGFycmF5IG9mIG1hbmlmZXN0cyBpZGVudGlmaWVyXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25zdHJlYW1FbGVjdHJvbkZFLnByb3RvdHlwZS5fcmVtb3ZlTG9jYWxTdWJzY3JpYmVyc0ZvckRlZmluZWRNZXRob2RzID0gZnVuY3Rpb24gKG1ldGhvZCwgbWFuaWZlc3RJZCkge1xuICBjb25zdCBtZXRob2RzID0gW1xuICAgICdkb3dubG9hZHMuc3RvcCcsXG4gICAgJ2Rvd25sb2Fkcy5zdG9wQWxsJyxcbiAgICAnZG93bmxvYWRzLnJlbW92ZScsXG4gICAgJ2Rvd25sb2Fkcy5yZW1vdmVBbGwnLFxuICAgICdkb3dubG9hZHMucmVtb3ZlQWxsVW5maW5pc2hlZCcsXG4gICAgJ2Rvd25sb2Fkcy51bnN1YnNjcmliZSdcbiAgXTtcbiAgLy8gcmVtb3ZlIGFsbCBzdWJzY3JpYmVycyB3aGVuIHVzZXIgcmVtb3ZlcyBvciBzdG9wIGFsbFxuICBpZiAobWV0aG9kID09PSAnZG93bmxvYWRzLnJlbW92ZUFsbCcgfHwgbWV0aG9kID09PSAnZG93bmxvYWRzLnN0b3BBbGwnKSB7XG4gICAgbWFuaWZlc3RJZCA9IHVuZGVmaW5lZDtcbiAgfVxuICBmb3IgKGxldCBpID0gMCwgaiA9IG1ldGhvZHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgaWYgKG1ldGhvZCA9PT0gbWV0aG9kc1tpXSkge1xuICAgICAgdGhpcy5fcmVtb3ZlTG9jYWxTdWJzY3JpYmVycyhtYW5pZmVzdElkKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufTtcbi8qKlxuICogQHBhcmFtIHtQcm9taXNlfSBwcm9taXNlIC0gcHJvbWlzZVxuICogQHBhcmFtIHtzdHJpbmd9IHN1YnNjcmliZXJzSWQgLSBzdWJzY3JpYmVyIGlkZW50aWZpZXJcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uRkUucHJvdG90eXBlLl9zYXZlU3Vic2NyaWJlcnNJZCA9IGZ1bmN0aW9uIChwcm9taXNlLCBzdWJzY3JpYmVyc0lkKSB7XG4gIGxldCBpLCBqO1xuICBpZiAodHlwZW9mIHN1YnNjcmliZXJzSWQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBzdWJzY3JpYmVyc0lkID09PSAnbnVtYmVyJykge1xuICAgIHN1YnNjcmliZXJzSWQgPSBbU3RyaW5nKHN1YnNjcmliZXJzSWQpXTtcbiAgfVxuICBmb3IgKGkgPSAwLCBqID0gc3Vic2NyaWJlcnNJZC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICB0aGlzLl9zdWJzY3JpYmVyc0lkW3N1YnNjcmliZXJzSWRbaV1dID0ge1xuICAgICAgbWFuaWZlc3RJZDogcHJvbWlzZS5hcmdzWzBdLFxuICAgICAgY2FsbGJhY2s6IHByb21pc2UuYXJnc1syICsgaV1cbiAgICB9O1xuICB9XG5cbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IHJlcXVlc3QgLSByZXF1ZXN0XG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25zdHJlYW1FbGVjdHJvbkZFLnByb3RvdHlwZS5fc2VuZCA9IGZ1bmN0aW9uIChyZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgdGhpcy5fd2luZG93LmRvd25zdHJlYW1FbGVjdHJvbkFQSS5zZW5kKCdkb3duc3RyZWFtRWxlY3Ryb25CRScsIHJlcXVlc3QpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihlKTtcbiAgfVxufTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvKipcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBuYW1lIERvd25zdHJlYW1FbGVjdHJvbkZFI2luaXRcbiAgICogQHBhcmFtIHtvYmplY3R9IHdpbmRvdyAtIHdpbmRvdyBvYmplY3QgZnJvbSByZW5kZXJlciB3aW5kb3dcbiAgICogQHBhcmFtIHtQZXJzaXN0ZW50fSBwZXJzaXN0ZW50IC0gcGVyc2lzdGVudCBoZWxwZXIgY2xhc3MgZm9yIGNyZWF0aW5nIGFuZCByZW1vdmluZyBwZXJzaXN0ZW50IHNlc3Npb25cbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIGluaXRpYWxpemUgdGhlIGFwaSBpbiByZW5kZXIgcHJvY2Vzc1xuICAgKiBAcmV0dXJucyB7RG93bnN0cmVhbUVsZWN0cm9uRkV9IERvd25zdHJlYW1FbGVjdHJvbkZFXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIHNvbWV3aGVyZSBpbiB0aGUgcmVuZGVyZXIgcHJvY2Vzc1xuICAgKiAvLyB0aGlzIGlzIGV4YW1wbGUgYmFzZWQgb24gcGVyc2lzdGVudCBwbHVnaW4gZnJvbSB7QGxpbmsgaHR0cHM6Ly9jYXN0bGFicy5jb20vcHJvZHVjdHMvcHJlc3RvcGxheS1kZXNrdG9wL3xQUkVTVE9wbGF5IGZvciBEZXNrdG9wc30sXG4gICAqIC8vIHlvdSBjYW4gY3JlYXRlIGl0cyBvd24gdG9vLCBmb3IgZGV0YWlscyBjbGljayBvbiA+PiB7QGxpbmsgUGVyc2lzdGVudH0gPDxcbiAgICogY29uc3QgcGVyc2lzdGVudCA9IHJlcXVpcmUoJy4vY2xwcF9wZXJzaXN0ZW50LnBsdWdpbi5taW4nKTtcbiAgICogY29uc3QgZG93bnN0cmVhbUVsZWN0cm9uID0gcmVxdWlyZShcImRvd25zdHJlYW0tZWxlY3Ryb25cIikuaW5pdCh3aW5kb3csIHBlcnNpc3RlbnQpO1xuICAgKi9cbiAgaW5pdDogZnVuY3Rpb24gKHdpbmRvdywgcGVyc2lzdGVudCkge1xuICAgIGlmICghZG93bnN0cmVhbUVsZWN0cm9uRkUpIHtcbiAgICAgIGRvd25zdHJlYW1FbGVjdHJvbkZFID0gbmV3IERvd25zdHJlYW1FbGVjdHJvbkZFKHdpbmRvdywgcGVyc2lzdGVudCk7XG4gICAgfVxuICAgIHJldHVybiBkb3duc3RyZWFtRWxlY3Ryb25GRTtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJXSURFVklORV9TQ0hFTUVfSURfVVJJIiwiZG93bnN0cmVhbUVsZWN0cm9uRkUiLCJzZXJpYWxpemUiLCJvYmoiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0V2lkZXZpbmVQU1NIIiwiaW5mbyIsIm1hbmlmZXN0UHJvdGVjdGlvbnMiLCJtYW5pZmVzdEluZm8iLCJwcm90ZWN0aW9ucyIsInZpZGVvUmVwcmVzZW50YXRpb24iLCJ2aWRlbyIsIm1hbmlmZXN0IiwiZmlsdGVyIiwibWFuaWZlc3RQcm90ZWN0aW9uIiwiaW5kZXhPZiIsImlkIiwid2lkZXZpbmVQU1NIIiwiaSIsImoiLCJsZW5ndGgiLCJzY2hlbWVJZFVyaSIsImNlbmNQU1NIIiwiYmluZCIsInNjb3BlIiwiZiIsImJpbmRGIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJiaW5kQWxsIiwiZk5hbWUiLCJjbG9uZVBlcnNpc3RlbnRDb25maWciLCJjb25maWciLCJjbG9uZWRDb25maWciLCJwYXJzZSIsInNlcnZlckNlcnRpZmljYXRlIiwibGljZW5zZVJlcXVlc3QiLCJsaWNlbnNlUmVzcG9uc2UiLCJEb3duc3RyZWFtRWxlY3Ryb25GRSIsIndpbmRvdyIsInBlcnNpc3RlbnQiLCJfcHJvbWlzZXNPYmoiLCJfc3Vic2NyaWJlcnNJZCIsIl9wcm9taXNlQ291bnRlciIsIl93aW5kb3ciLCJfcGVyc2lzdGVudCIsIl9jcmVhdGVBcGlNZXRob2RzIiwiX2F0dGFjaEV2ZW50cyIsInByb3RvdHlwZSIsImRvd25sb2FkcyIsImNyZWF0ZVBlcnNpc3RlbnQiLCJhcmdzIiwicmVzb2x2ZSIsInJlamVjdCIsIm1hbmlmZXN0SWQiLCJmb3JjZWQiLCJ0aGVuIiwiZXhpc3RpbmdQZXJzaXN0ZW50U2Vzc2lvbklkIiwicHNzaCIsImNyZWF0ZVBlcnNpc3RlbnRTZXNzaW9uIiwicGVyc2lzdGVudFNlc3Npb25JZCIsInNhdmVQZXJzaXN0ZW50IiwicmVtb3ZlUGVyc2lzdGVudFNlc3Npb24iLCJyZW1vdmVQZXJzaXN0ZW50IiwicmVtb3ZlIiwicmVtb3ZlQWxsIiwibWFuaWZlc3RzIiwiZmlsdGVyZWQiLCJwZXJzaXN0ZW50QXJyIiwibWFwIiwicHJvbWlzZXMiLCJwdXNoIiwiUHJvbWlzZSIsImFsbCIsIl9hcGlDYWxsIiwibWV0aG9kIiwib3JpZ2luYWxNZXRob2QiLCJzZWxmIiwicHJvbWlzZUlkIiwiX2dlbmVyYXRlUHJvbWlzZUlkIiwicHJvbWlzZSIsInJlcXVlc3QiLCJfc2VuZCIsImRvd25zdHJlYW1FbGVjdHJvbkFQSSIsInJlY2VpdmUiLCJfcHJvY2Vzc0FwaSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfYmVmb3JlVW5sb2FkIiwiX3JlbW92ZVN1YnNjcmliZXJzIiwibmFtZXNwYWNlIiwibWV0aG9kcyIsImFwaUZ1bmN0aW9uIiwibmFtZSIsImNyZWF0ZUFwaU1ldGhvZCIsIl9leGVjdXRlU3Vic2NyaWJlciIsInN1YnNjcmliZXJJZCIsImVyciIsInJlc3VsdCIsInN1YnNjcmliZXJGaW5pc2hlZCIsInN1YnNjcmliZXIiLCJjYWxsYmFjayIsIl9yZW1vdmVMb2NhbFN1YnNjcmliZXJzIiwidHMiLCJEYXRlIiwiZ2V0VGltZSIsImV2dCIsImVycm9yIiwicHJvbWlzZU9iaiIsIl9yZW1vdmVMb2NhbFN1YnNjcmliZXJzRm9yRGVmaW5lZE1ldGhvZHMiLCJzdGF0dXMiLCJjYWxsIiwic3Vic2NyaWJlcnNJZCIsIl9zYXZlU3Vic2NyaWJlcnNJZCIsImtleSIsImhhc093blByb3BlcnR5IiwiQXJyYXkiLCJpdGVtIiwicmVtb3ZlU3Vic2NyaWJlcnMiLCJzdWJzY3JpYmVyS2V5IiwicG9zIiwic3BsaWNlIiwidW5kZWZpbmVkIiwiU3RyaW5nIiwic2VuZCIsImUiLCJjb25zb2xlIiwibW9kdWxlIiwiZXhwb3J0cyIsImluaXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5434\n")},2292:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{eval('var _require = __webpack_require__(7194),\n  contextBridge = _require.contextBridge,\n  ipcRenderer = _require.ipcRenderer;\nvar downstreamElectron = __webpack_require__(5434);\n\n// Expose protected methods that allow the renderer process to use\n// the ipcRenderer without exposing the entire object\ncontextBridge.exposeInMainWorld("downstreamElectronAPI", {\n  init: function init(window, persitance) {\n    return downstreamElectron.init(window, persitance);\n  },\n  send: function send(channel, data) {\n    // whitelist channels\n    var validChannels = ["downstreamElectronBE"];\n    if (validChannels.includes(channel)) {\n      ipcRenderer.send(channel, data);\n    }\n  },\n  receive: function receive(channel, func) {\n    var validChannels = ["downstreamElectronFE"];\n    if (validChannels.includes(channel)) {\n      ipcRenderer.on(channel, function (event) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        return func(args, event);\n      });\n    }\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI5Mi5qcyIsIm1hcHBpbmdzIjoiQUFBQSxJQUFBQSxRQUFBLEdBR0lDLG1CQUFPLENBQUMsSUFBVSxDQUFDO0VBRnJCQyxhQUFhLEdBQUFGLFFBQUEsQ0FBYkUsYUFBYTtFQUNiQyxXQUFXLEdBQUFILFFBQUEsQ0FBWEcsV0FBVztBQUdiLElBQU1DLGtCQUFrQixHQUFHSCxtQkFBTyxDQUFDLElBQTZCLENBQUM7O0FBRWpFO0FBQ0E7QUFDQUMsYUFBYSxDQUFDRyxpQkFBaUIsQ0FDN0IsdUJBQXVCLEVBQUU7RUFDekJDLElBQUksRUFBRSxTQUFBQSxLQUFDQyxNQUFNLEVBQUVDLFVBQVUsRUFBSztJQUM1QixPQUFPSixrQkFBa0IsQ0FBQ0UsSUFBSSxDQUFDQyxNQUFNLEVBQUVDLFVBQVUsQ0FBQztFQUNwRCxDQUFDO0VBQ0RDLElBQUksRUFBRSxTQUFBQSxLQUFDQyxPQUFPLEVBQUVDLElBQUksRUFBSztJQUN2QjtJQUNBLElBQUlDLGFBQWEsR0FBRyxDQUFDLHNCQUFzQixDQUFDO0lBQzVDLElBQUlBLGFBQWEsQ0FBQ0MsUUFBUSxDQUFDSCxPQUFPLENBQUMsRUFBRTtNQUNuQ1AsV0FBVyxDQUFDTSxJQUFJLENBQUNDLE9BQU8sRUFBRUMsSUFBSSxDQUFDO0lBQ2pDO0VBQ0YsQ0FBQztFQUNERyxPQUFPLEVBQUUsU0FBQUEsUUFBQ0osT0FBTyxFQUFFSyxJQUFJLEVBQUs7SUFDMUIsSUFBSUgsYUFBYSxHQUFHLENBQUMsc0JBQXNCLENBQUM7SUFDNUMsSUFBSUEsYUFBYSxDQUFDQyxRQUFRLENBQUNILE9BQU8sQ0FBQyxFQUFFO01BQ25DUCxXQUFXLENBQUNhLEVBQUUsQ0FBQ04sT0FBTyxFQUFFLFVBQUNPLEtBQUs7UUFBQSxTQUFBQyxJQUFBLEdBQUFDLFNBQUEsQ0FBQUMsTUFBQSxFQUFLQyxJQUFJLE9BQUFDLEtBQUEsQ0FBQUosSUFBQSxPQUFBQSxJQUFBLFdBQUFLLElBQUEsTUFBQUEsSUFBQSxHQUFBTCxJQUFBLEVBQUFLLElBQUE7VUFBSkYsSUFBSSxDQUFBRSxJQUFBLFFBQUFKLFNBQUEsQ0FBQUksSUFBQTtRQUFBO1FBQUEsT0FBS1IsSUFBSSxDQUFDTSxJQUFJLEVBQUVKLEtBQUssQ0FBQztNQUFBLEVBQUM7SUFDaEU7RUFDRjtBQUNGLENBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rvd25zdHJlYW0tZWxlY3Ryb24vLi9hcGkvZG93bnN0cmVhbS1lbGVjdHJvbi1wcmVsb2FkLmpzPzg3YzIiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge1xuICBjb250ZXh0QnJpZGdlLFxuICBpcGNSZW5kZXJlclxufSA9IHJlcXVpcmUoXCJlbGVjdHJvblwiKTtcblxuY29uc3QgZG93bnN0cmVhbUVsZWN0cm9uID0gcmVxdWlyZShcIi4vZG93bnN0cmVhbS1lbGVjdHJvbi1mZS5qc1wiKTtcblxuLy8gRXhwb3NlIHByb3RlY3RlZCBtZXRob2RzIHRoYXQgYWxsb3cgdGhlIHJlbmRlcmVyIHByb2Nlc3MgdG8gdXNlXG4vLyB0aGUgaXBjUmVuZGVyZXIgd2l0aG91dCBleHBvc2luZyB0aGUgZW50aXJlIG9iamVjdFxuY29udGV4dEJyaWRnZS5leHBvc2VJbk1haW5Xb3JsZChcbiAgXCJkb3duc3RyZWFtRWxlY3Ryb25BUElcIiwge1xuICBpbml0OiAod2luZG93LCBwZXJzaXRhbmNlKSA9PiB7XG4gICAgcmV0dXJuIGRvd25zdHJlYW1FbGVjdHJvbi5pbml0KHdpbmRvdywgcGVyc2l0YW5jZSk7XG4gIH0sXG4gIHNlbmQ6IChjaGFubmVsLCBkYXRhKSA9PiB7XG4gICAgLy8gd2hpdGVsaXN0IGNoYW5uZWxzXG4gICAgbGV0IHZhbGlkQ2hhbm5lbHMgPSBbXCJkb3duc3RyZWFtRWxlY3Ryb25CRVwiXTtcbiAgICBpZiAodmFsaWRDaGFubmVscy5pbmNsdWRlcyhjaGFubmVsKSkge1xuICAgICAgaXBjUmVuZGVyZXIuc2VuZChjaGFubmVsLCBkYXRhKTtcbiAgICB9XG4gIH0sXG4gIHJlY2VpdmU6IChjaGFubmVsLCBmdW5jKSA9PiB7XG4gICAgbGV0IHZhbGlkQ2hhbm5lbHMgPSBbXCJkb3duc3RyZWFtRWxlY3Ryb25GRVwiXTtcbiAgICBpZiAodmFsaWRDaGFubmVscy5pbmNsdWRlcyhjaGFubmVsKSkge1xuICAgICAgaXBjUmVuZGVyZXIub24oY2hhbm5lbCwgKGV2ZW50LCAuLi5hcmdzKSA9PiBmdW5jKGFyZ3MsIGV2ZW50KSk7XG4gICAgfVxuICB9XG59XG4pOyJdLCJuYW1lcyI6WyJfcmVxdWlyZSIsInJlcXVpcmUiLCJjb250ZXh0QnJpZGdlIiwiaXBjUmVuZGVyZXIiLCJkb3duc3RyZWFtRWxlY3Ryb24iLCJleHBvc2VJbk1haW5Xb3JsZCIsImluaXQiLCJ3aW5kb3ciLCJwZXJzaXRhbmNlIiwic2VuZCIsImNoYW5uZWwiLCJkYXRhIiwidmFsaWRDaGFubmVscyIsImluY2x1ZGVzIiwicmVjZWl2ZSIsImZ1bmMiLCJvbiIsImV2ZW50IiwiX2xlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFyZ3MiLCJBcnJheSIsIl9rZXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2292\n')}},__webpack_module_cache__={};function __webpack_require__(Q){var U=__webpack_module_cache__[Q];if(void 0!==U)return U.exports;var B=__webpack_module_cache__[Q]={exports:{}};return __webpack_modules__[Q](B,B.exports,__webpack_require__),B.exports}var __webpack_exports__=__webpack_require__(2292);return __webpack_exports__})()));