/*! For license information please see startServer.js.LICENSE.txt */
!function(Q,U){if("object"==typeof exports&&"object"==typeof module)module.exports=U(require("cors"),require("express"));else if("function"==typeof define&&define.amd)define(["cors","express"],U);else{var F="object"==typeof exports?U(require("cors"),require("express")):U(Q.cors,Q.express);for(var B in F)("object"==typeof exports?exports:Q)[B]=F[B]}}(global,((__WEBPACK_EXTERNAL_MODULE__1761__,__WEBPACK_EXTERNAL_MODULE__2806__)=>(()=>{var __webpack_modules__={4657:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n\nvar fs = __webpack_require__(7147);\n\nfunction exists(fileUrl, callback) {\n  fs.stat(fileUrl, function (error, stat) {\n    if (error) {\n      callback(false);\n    } else {\n      callback(true, stat.size);\n    }\n  });\n}\n\nvar _promiseCounter = 0;\nvar _promisesObj = {};\n\nfunction _generateRequestId() {\n  var ts = new Date().getTime();\n  var requestId;\n  _promiseCounter++;\n  requestId = _promiseCounter + '-' + ts;\n  return requestId;\n}\n\nfunction processCmd(cmd, args) {\n  var requestId = _generateRequestId();\n\n  var promise = new Promise(function (resolve, reject) {\n    _promisesObj[requestId] = {\n      resolve: resolve,\n      reject: reject\n    };\n  });\n  var request = {};\n  request.requestId = requestId;\n  request.cmd = cmd;\n  request.args = args;\n  process.send(request);\n  return promise;\n}\n\nfunction processMessage(data) {\n  var requestId = data.requestId;\n  var error = data.error;\n  var result = data.result;\n  var promiseObj = _promisesObj[requestId + ''];\n\n  function resolve(result) {\n    promiseObj.resolve(result);\n  }\n\n  if (promiseObj) {\n    if (data.status === 'OK') {\n      resolve(result);\n    } else {\n      promiseObj.reject(error);\n    }\n\n    delete _promisesObj[requestId];\n  }\n}\n/**\n *\n * @private\n * @returns {void}\n */\n\n\nfunction _attachEvents() {\n  process.on('message', processMessage);\n}\n/**\n* ContentRoute\n* @param {object} app - express server instance\n* @constructor\n*/\n\n\nfunction ContentRoute(app, routeName) {\n  var manifestInfo = {};\n\n  _attachEvents();\n  /*------------------------------------------------------------------------------------------*/\n  // ROUTER MANAGEMENT\n\n  /*------------------------------------------------------------------------------------------*/\n\n  /**\n   * Handles get movies/manifestId\n   */\n\n\n  app.get('/' + routeName + '/:id/*', function (req, res) {\n    var manifestId = req.params['id']; // send back file data function\n\n    var sendFile = function sendFile(file) {\n      var options = {\n        dotfiles: 'deny'\n      };\n      res.sendFile(file, options, function (err) {\n        if (err && err.status) {\n          // error to open file => remove saved info (maybe moved)\n          delete manifestInfo[manifestId];\n          res.status(err.status).end();\n        }\n      });\n    };\n\n    var seekIfNeeded = function seekIfNeeded(folder) {\n      var file = folder + '/' + manifestId + '/' + req.params[0];\n      exists(file, function (exists) {\n        if (exists) {\n          // fragment exists on disk, let's check if it is not being downloaded\n          processCmd('is_downloading', {\n            manifest: manifestId,\n            file: file\n          }).then(function () {\n            sendFile(file);\n          })[\"catch\"](function () {\n            return res.status(404).end();\n          });\n        } else {\n          // fragment doesn't on disk, ask to download it\n          processCmd('perform_seek', {\n            manifest: manifestId,\n            file: file\n          }).then(function () {\n            sendFile(file);\n          })[\"catch\"](function () {\n            return res.status(404).end();\n          });\n        }\n      });\n    };\n\n    var getFile = function getFile(info) {\n      if (info && info.status === 'FINISHED') {\n        // if file has status finished, no need to check if fragment is being downloaded\n        var file = info.folder + '/' + manifestId + '/' + req.params[0];\n        exists(file, function (exists) {\n          if (exists) {\n            // fragment exists => send data\n            sendFile(file);\n          } else {\n            // fragment doesn't exists => 404 and remove cached data\n            delete manifestInfo[manifestId];\n            return res.status(404).end();\n          }\n        });\n      } else {\n        // file is not finished, let's perform seek if needed\n        seekIfNeeded(info.folder);\n      }\n    }; // check if info have been already saved for the manifest\n\n\n    if (manifestInfo[manifestId]) {\n      getFile(manifestInfo[manifestId]);\n    } else {\n      // no info for manifest id, asks main process to get manifest info\n      processCmd('get_info', {\n        manifest: manifestId\n      }).then(function (result) {\n        manifestInfo[manifestId] = result;\n        getFile(manifestInfo[manifestId]);\n      })[\"catch\"](function () {\n        delete manifestInfo[manifestId];\n        return res.status(404).send('Cannot find manifest');\n      });\n    }\n  });\n}\n\nmodule.exports = ContentRoute;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VUFBVSxDQUFDLFVBQUQsRUFBYTtRQUFDa0MsUUFBUSxFQUFFVjtNQUFYLENBQWIsQ0FBVixDQUNHVyxJQURILENBQ1EsVUFBQ3ZCLE1BQUQsRUFBWTtRQUNsQlEsWUFBWSxDQUFDSSxVQUFELENBQVosR0FBMkJaLE1BQTNCO1FBQ0F3QixPQUFPLENBQUVoQixZQUFZLENBQUNJLFVBQUQsQ0FBZCxDQUFQO01BQ0QsQ0FKRCxXQUtTLFlBQVk7UUFDbkIsT0FBUUosWUFBWSxDQUFDSSxVQUFELENBQXBCO1FBQ0EsT0FBT0QsR0FBRyxDQUFDVCxNQUFKLENBQVcsR0FBWCxFQUFnQkwsSUFBaEIsQ0FBcUIsc0JBQXJCLENBQVA7TUFDRCxDQVJEO0lBU0Q7RUFDRixDQTlFRDtBQStFRDs7QUFFRDZCLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnRCLFlBQWpCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG93bnN0cmVhbS1lbGVjdHJvbi8uL2FwaS9zZXJ2ZXIvY29udGVudFJvdXRlLmpzPzg2NjgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuXG5mdW5jdGlvbiBleGlzdHMgKGZpbGVVcmwsIGNhbGxiYWNrKSB7XG4gIGZzLnN0YXQoZmlsZVVybCwgZnVuY3Rpb24gKGVycm9yLCBzdGF0KSB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjYWxsYmFjayhmYWxzZSlcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2sodHJ1ZSwgc3RhdC5zaXplKTtcbiAgICB9XG4gIH0pO1xufVxuXG5sZXQgX3Byb21pc2VDb3VudGVyID0gMDtcbmxldCBfcHJvbWlzZXNPYmogPSB7fTtcblxuZnVuY3Rpb24gX2dlbmVyYXRlUmVxdWVzdElkICgpIHtcbiAgbGV0IHRzID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIGxldCByZXF1ZXN0SWQ7XG4gIF9wcm9taXNlQ291bnRlcisrO1xuICByZXF1ZXN0SWQgPSBfcHJvbWlzZUNvdW50ZXIgKyAnLScgKyB0cztcbiAgcmV0dXJuIHJlcXVlc3RJZDtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0NtZCAoY21kLCBhcmdzKSB7XG4gIGNvbnN0IHJlcXVlc3RJZCA9IF9nZW5lcmF0ZVJlcXVlc3RJZCgpO1xuICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIF9wcm9taXNlc09ialtyZXF1ZXN0SWRdID0ge1xuICAgICAgcmVzb2x2ZTogcmVzb2x2ZSxcbiAgICAgIHJlamVjdDogcmVqZWN0XG4gICAgfTtcbiAgfSk7XG4gIGxldCByZXF1ZXN0ID0ge307XG4gIHJlcXVlc3QucmVxdWVzdElkID0gcmVxdWVzdElkO1xuICByZXF1ZXN0LmNtZCA9IGNtZDtcbiAgcmVxdWVzdC5hcmdzID0gYXJncztcbiAgcHJvY2Vzcy5zZW5kKHJlcXVlc3QpO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc01lc3NhZ2UgKGRhdGEpIHtcbiAgY29uc3QgcmVxdWVzdElkID0gZGF0YS5yZXF1ZXN0SWQ7XG4gIGNvbnN0IGVycm9yID0gZGF0YS5lcnJvcjtcbiAgY29uc3QgcmVzdWx0ID0gZGF0YS5yZXN1bHQ7XG4gIGNvbnN0IHByb21pc2VPYmogPSBfcHJvbWlzZXNPYmpbcmVxdWVzdElkICsgJyddO1xuXG4gIGZ1bmN0aW9uIHJlc29sdmUgKHJlc3VsdCkge1xuICAgIHByb21pc2VPYmoucmVzb2x2ZShyZXN1bHQpO1xuICB9XG5cbiAgaWYgKHByb21pc2VPYmopIHtcbiAgICBpZiAoZGF0YS5zdGF0dXMgPT09ICdPSycpIHtcbiAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvbWlzZU9iai5yZWplY3QoZXJyb3IpO1xuICAgIH1cbiAgICBkZWxldGUoX3Byb21pc2VzT2JqW3JlcXVlc3RJZF0pO1xuICB9XG59XG5cbi8qKlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gX2F0dGFjaEV2ZW50cyAoKSB7XG4gIHByb2Nlc3Mub24oJ21lc3NhZ2UnLCBwcm9jZXNzTWVzc2FnZSk7XG59XG5cbi8qKlxuKiBDb250ZW50Um91dGVcbiogQHBhcmFtIHtvYmplY3R9IGFwcCAtIGV4cHJlc3Mgc2VydmVyIGluc3RhbmNlXG4qIEBjb25zdHJ1Y3RvclxuKi9cblxuZnVuY3Rpb24gQ29udGVudFJvdXRlIChhcHAsIHJvdXRlTmFtZSkge1xuXG4gIGxldCBtYW5pZmVzdEluZm8gPSB7fTtcblxuICBfYXR0YWNoRXZlbnRzKCk7XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8vIFJPVVRFUiBNQU5BR0VNRU5UXG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGdldCBtb3ZpZXMvbWFuaWZlc3RJZFxuICAgKi9cbiAgYXBwLmdldCgnLycgKyByb3V0ZU5hbWUgKyAnLzppZC8qJywgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG5cbiAgICBsZXQgbWFuaWZlc3RJZCA9IHJlcS5wYXJhbXNbJ2lkJ107XG5cbiAgICAvLyBzZW5kIGJhY2sgZmlsZSBkYXRhIGZ1bmN0aW9uXG4gICAgbGV0IHNlbmRGaWxlID0gZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBkb3RmaWxlczogJ2RlbnknXG4gICAgICB9XG4gICAgICByZXMuc2VuZEZpbGUoZmlsZSwgb3B0aW9ucywgZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoZXJyICYmIGVyci5zdGF0dXMpIHtcbiAgICAgICAgICAvLyBlcnJvciB0byBvcGVuIGZpbGUgPT4gcmVtb3ZlIHNhdmVkIGluZm8gKG1heWJlIG1vdmVkKVxuICAgICAgICAgIGRlbGV0ZSBtYW5pZmVzdEluZm9bbWFuaWZlc3RJZF07XG4gICAgICAgICAgcmVzLnN0YXR1cyhlcnIuc3RhdHVzKS5lbmQoKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBsZXQgc2Vla0lmTmVlZGVkICA9IGZ1bmN0aW9uIChmb2xkZXIpIHtcbiAgICAgIGxldCBmaWxlID0gZm9sZGVyICsgJy8nICsgbWFuaWZlc3RJZCArICcvJyArIHJlcS5wYXJhbXNbMF07XG4gICAgICBleGlzdHMoZmlsZSwgKGV4aXN0cykgPT4ge1xuICAgICAgICBpZiAoZXhpc3RzKSB7XG4gICAgICAgICAgLy8gZnJhZ21lbnQgZXhpc3RzIG9uIGRpc2ssIGxldCdzIGNoZWNrIGlmIGl0IGlzIG5vdCBiZWluZyBkb3dubG9hZGVkXG4gICAgICAgICAgcHJvY2Vzc0NtZCgnaXNfZG93bmxvYWRpbmcnLCB7bWFuaWZlc3Q6IG1hbmlmZXN0SWQsIGZpbGU6IGZpbGV9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgc2VuZEZpbGUoZmlsZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuZW5kKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gZnJhZ21lbnQgZG9lc24ndCBvbiBkaXNrLCBhc2sgdG8gZG93bmxvYWQgaXRcbiAgICAgICAgICBwcm9jZXNzQ21kKCdwZXJmb3JtX3NlZWsnLCB7bWFuaWZlc3Q6IG1hbmlmZXN0SWQsIGZpbGU6IGZpbGV9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgc2VuZEZpbGUoZmlsZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuZW5kKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgbGV0IGdldEZpbGUgPSBmdW5jdGlvbiAoaW5mbykge1xuICAgICAgaWYgKGluZm8gJiYgaW5mby5zdGF0dXMgPT09ICdGSU5JU0hFRCcpIHtcbiAgICAgICAgLy8gaWYgZmlsZSBoYXMgc3RhdHVzIGZpbmlzaGVkLCBubyBuZWVkIHRvIGNoZWNrIGlmIGZyYWdtZW50IGlzIGJlaW5nIGRvd25sb2FkZWRcbiAgICAgICAgbGV0IGZpbGUgPSBpbmZvLmZvbGRlciArICcvJyArIG1hbmlmZXN0SWQgKyAnLycgKyByZXEucGFyYW1zWzBdO1xuICAgICAgICBleGlzdHMoZmlsZSwgKGV4aXN0cykgPT4ge1xuICAgICAgICAgIGlmIChleGlzdHMpIHtcbiAgICAgICAgICAgIC8vIGZyYWdtZW50IGV4aXN0cyA9PiBzZW5kIGRhdGFcbiAgICAgICAgICAgIHNlbmRGaWxlKGZpbGUpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZyYWdtZW50IGRvZXNuJ3QgZXhpc3RzID0+IDQwNCBhbmQgcmVtb3ZlIGNhY2hlZCBkYXRhXG4gICAgICAgICAgICBkZWxldGUgIG1hbmlmZXN0SW5mb1ttYW5pZmVzdElkXTtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuZW5kKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGZpbGUgaXMgbm90IGZpbmlzaGVkLCBsZXQncyBwZXJmb3JtIHNlZWsgaWYgbmVlZGVkXG4gICAgICAgIHNlZWtJZk5lZWRlZCggaW5mby5mb2xkZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGNoZWNrIGlmIGluZm8gaGF2ZSBiZWVuIGFscmVhZHkgc2F2ZWQgZm9yIHRoZSBtYW5pZmVzdFxuICAgIGlmIChtYW5pZmVzdEluZm9bbWFuaWZlc3RJZF0pIHtcbiAgICAgIGdldEZpbGUoIG1hbmlmZXN0SW5mb1ttYW5pZmVzdElkXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vIGluZm8gZm9yIG1hbmlmZXN0IGlkLCBhc2tzIG1haW4gcHJvY2VzcyB0byBnZXQgbWFuaWZlc3QgaW5mb1xuICAgICAgcHJvY2Vzc0NtZCgnZ2V0X2luZm8nLCB7bWFuaWZlc3Q6IG1hbmlmZXN0SWR9KVxuICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIG1hbmlmZXN0SW5mb1ttYW5pZmVzdElkXSA9IHJlc3VsdDtcbiAgICAgICAgZ2V0RmlsZSggbWFuaWZlc3RJbmZvW21hbmlmZXN0SWRdKTtcbiAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRlbGV0ZSAgbWFuaWZlc3RJbmZvW21hbmlmZXN0SWRdO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoJ0Nhbm5vdCBmaW5kIG1hbmlmZXN0Jyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ29udGVudFJvdXRlO1xuIl0sIm5hbWVzIjpbImZzIiwicmVxdWlyZSIsImV4aXN0cyIsImZpbGVVcmwiLCJjYWxsYmFjayIsInN0YXQiLCJlcnJvciIsInNpemUiLCJfcHJvbWlzZUNvdW50ZXIiLCJfcHJvbWlzZXNPYmoiLCJfZ2VuZXJhdGVSZXF1ZXN0SWQiLCJ0cyIsIkRhdGUiLCJnZXRUaW1lIiwicmVxdWVzdElkIiwicHJvY2Vzc0NtZCIsImNtZCIsImFyZ3MiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZXF1ZXN0IiwicHJvY2VzcyIsInNlbmQiLCJwcm9jZXNzTWVzc2FnZSIsImRhdGEiLCJyZXN1bHQiLCJwcm9taXNlT2JqIiwic3RhdHVzIiwiX2F0dGFjaEV2ZW50cyIsIm9uIiwiQ29udGVudFJvdXRlIiwiYXBwIiwicm91dGVOYW1lIiwibWFuaWZlc3RJbmZvIiwiZ2V0IiwicmVxIiwicmVzIiwibWFuaWZlc3RJZCIsInBhcmFtcyIsInNlbmRGaWxlIiwiZmlsZSIsIm9wdGlvbnMiLCJkb3RmaWxlcyIsImVyciIsImVuZCIsInNlZWtJZk5lZWRlZCIsImZvbGRlciIsIm1hbmlmZXN0IiwidGhlbiIsImdldEZpbGUiLCJpbmZvIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4657\n")},5975:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{eval("var express = __webpack_require__(2806);\n\nvar cors = __webpack_require__(1761);\n\n(function () {\n  process.send({\n    cmd: 'log',\n    log: 'Starting HTTP server'\n  });\n  var server = express();\n  server.use(cors()); // listen for messages\n\n  process.on('message', function (data) {\n    // handles init message\n    if (data.cmd === 'init') {\n      // add content route\n      __webpack_require__(4657)(server, data.routeName); // start http server\n\n\n      server.listen(data.port, function () {\n        // http server is listening => send back listening port\n        process.send({\n          cmd: 'listening_port',\n          port: data.port\n        });\n      });\n    }\n  });\n})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTk3NS5qcyIsIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxPQUFPLEdBQUdDLG1CQUFPLENBQUMsSUFBRCxDQUF2Qjs7QUFDQSxJQUFNQyxJQUFJLEdBQUdELG1CQUFPLENBQUMsSUFBRCxDQUFwQjs7QUFFQyxhQUFZO0VBRVhFLE9BQU8sQ0FBQ0MsSUFBUixDQUFhO0lBQUNDLEdBQUcsRUFBRSxLQUFOO0lBQ0NDLEdBQUcsRUFBRTtFQUROLENBQWI7RUFFQSxJQUFJQyxNQUFNLEdBQUdQLE9BQU8sRUFBcEI7RUFDQU8sTUFBTSxDQUFDQyxHQUFQLENBQVdOLElBQUksRUFBZixFQUxXLENBT1g7O0VBQ0FDLE9BQU8sQ0FBQ00sRUFBUixDQUFXLFNBQVgsRUFBc0IsVUFBVUMsSUFBVixFQUFnQjtJQUVwQztJQUNBLElBQUlBLElBQUksQ0FBQ0wsR0FBTCxLQUFhLE1BQWpCLEVBQXlCO01BQ3ZCO01BQ0FKLG1CQUFPLENBQUMsSUFBRCxDQUFQLENBQTBCTSxNQUExQixFQUFrQ0csSUFBSSxDQUFDQyxTQUF2QyxFQUZ1QixDQUd2Qjs7O01BQ0FKLE1BQU0sQ0FBQ0ssTUFBUCxDQUFjRixJQUFJLENBQUNHLElBQW5CLEVBQXlCLFlBQVk7UUFDbkM7UUFDQVYsT0FBTyxDQUFDQyxJQUFSLENBQWE7VUFBQ0MsR0FBRyxFQUFFLGdCQUFOO1VBQXdCUSxJQUFJLEVBQUVILElBQUksQ0FBQ0c7UUFBbkMsQ0FBYjtNQUNELENBSEQ7SUFJRDtFQUNGLENBWkQ7QUFhRCxDQXJCQSxHQUFEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG93bnN0cmVhbS1lbGVjdHJvbi8uL2FwaS9zZXJ2ZXIvc3RhcnRTZXJ2ZXIuanM/NWZhNiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKTtcblxuKGZ1bmN0aW9uICgpIHtcblxuICBwcm9jZXNzLnNlbmQoe2NtZDogJ2xvZycsXG4gICAgICAgICAgICAgICAgbG9nOiAnU3RhcnRpbmcgSFRUUCBzZXJ2ZXInfSk7XG4gIGxldCBzZXJ2ZXIgPSBleHByZXNzKCk7XG4gIHNlcnZlci51c2UoY29ycygpKTtcblxuICAvLyBsaXN0ZW4gZm9yIG1lc3NhZ2VzXG4gIHByb2Nlc3Mub24oJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgLy8gaGFuZGxlcyBpbml0IG1lc3NhZ2VcbiAgICBpZiAoZGF0YS5jbWQgPT09ICdpbml0Jykge1xuICAgICAgLy8gYWRkIGNvbnRlbnQgcm91dGVcbiAgICAgIHJlcXVpcmUoJy4vY29udGVudFJvdXRlJykoc2VydmVyLCBkYXRhLnJvdXRlTmFtZSk7XG4gICAgICAvLyBzdGFydCBodHRwIHNlcnZlclxuICAgICAgc2VydmVyLmxpc3RlbihkYXRhLnBvcnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gaHR0cCBzZXJ2ZXIgaXMgbGlzdGVuaW5nID0+IHNlbmQgYmFjayBsaXN0ZW5pbmcgcG9ydFxuICAgICAgICBwcm9jZXNzLnNlbmQoe2NtZDogJ2xpc3RlbmluZ19wb3J0JywgcG9ydDogZGF0YS5wb3J0fSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufSgpKTtcbiJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNvcnMiLCJwcm9jZXNzIiwic2VuZCIsImNtZCIsImxvZyIsInNlcnZlciIsInVzZSIsIm9uIiwiZGF0YSIsInJvdXRlTmFtZSIsImxpc3RlbiIsInBvcnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5975\n")},7147:Q=>{"use strict";Q.exports=require("fs")},1761:Q=>{"use strict";Q.exports=__WEBPACK_EXTERNAL_MODULE__1761__},2806:Q=>{"use strict";Q.exports=__WEBPACK_EXTERNAL_MODULE__2806__}},__webpack_module_cache__={};function __webpack_require__(Q){var U=__webpack_module_cache__[Q];if(void 0!==U)return U.exports;var F=__webpack_module_cache__[Q]={exports:{}};return __webpack_modules__[Q](F,F.exports,__webpack_require__),F.exports}var __webpack_exports__=__webpack_require__(5975);return __webpack_exports__})()));