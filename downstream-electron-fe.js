/*! For license information please see downstream-electron-fe.js.LICENSE.txt */
!function(Q,B){if("object"==typeof exports&&"object"==typeof module)module.exports=B();else if("function"==typeof define&&define.amd)define([],B);else{var F=B();for(var U in F)("object"==typeof exports?exports:Q)[U]=F[U]}}(global,(()=>(()=>{"use strict";var __webpack_modules__={5434:module=>{eval("/*eslint no-console: [\"error\", { allow: [\"warn\", \"error\", \"info\"] }] */\n\n\nvar WIDEVINE_SCHEME_ID_URI = 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed';\nvar downstreamElectronFE;\nfunction serialize(obj) {\n  return JSON.stringify(obj);\n}\nfunction getWidevinePSSH(info) {\n  var manifestProtections = info.manifestInfo.protections;\n  var videoRepresentation = manifestProtections.video[0] || {};\n  if (manifestProtections.video && info.manifest.video) {\n    videoRepresentation = manifestProtections.video.filter(function (manifestProtection) {\n      return info.manifest.video.indexOf(manifestProtection.id) >= 0;\n    });\n    videoRepresentation = videoRepresentation[0] || {};\n  }\n  var protections = videoRepresentation.protections || [];\n  var widevinePSSH;\n  for (var i = 0, j = protections.length; i < j; i++) {\n    if (protections[i].schemeIdUri === WIDEVINE_SCHEME_ID_URI) {\n      widevinePSSH = protections[i].cencPSSH;\n      break;\n    }\n  }\n  return widevinePSSH;\n}\nfunction bind(scope, f) {\n  return function bindF() {\n    f.apply(scope, arguments);\n  };\n}\nfunction bindAll(scope) {\n  for (var i = 1, j = arguments.length; i < j; i++) {\n    var fName = arguments[i];\n    scope[fName] = bind(scope, scope[fName]);\n  }\n}\nfunction clonePersistentConfig(config) {\n  // deep clone the config\n  var clonedConfig = JSON.parse(JSON.stringify(config));\n  if (typeof config.serverCertificate !== 'undefined') {\n    clonedConfig.serverCertificate = config.serverCertificate;\n  }\n  if (typeof config.licenseRequest === 'function') {\n    clonedConfig.licenseRequest = config.licenseRequest;\n  }\n  if (typeof config.licenseResponse === 'function') {\n    clonedConfig.licenseResponse = config.licenseResponse;\n  }\n  return clonedConfig;\n}\n\n/**\n * @constructor\n * @namespace DownstreamElectronFE\n * @param {object} window - window object from renderer window\n * @param {Persistent} persistent - persistent helper class for creating and removing persistent session\n * @property {DownstreamElectronFE.downloads} downloads - api for downloads\n * @description\n * this a bridge class for [DownstreamElectronBE]{@link DownstreamElectronBE}\n * all methods described in ({@link DownstreamElectronFE.downloads})\n */\nfunction DownstreamElectronFE(window, persistent) {\n  this._promisesObj = {};\n  this._subscribersId = {};\n  this._promiseCounter = 0;\n  this._window = window;\n  this._persistent = persistent;\n  bindAll(this, '_processApi', '_beforeUnload');\n  this._createApiMethods('downloads', ['create', 'createPersistent', 'getFolderInfo', 'getList', 'getListWithInfo', 'getOfflineLink', 'info', 'remove', 'removeAll', 'removeAllUnfinished', 'removePersistent', 'resume', 'saveData', 'savePersistent', 'start', 'stop', 'stopAll', 'subscribe', 'unsubscribe', 'updateDownloadFolder']);\n  this._attachEvents();\n}\nDownstreamElectronFE.prototype.downloads = {};\n\n/**\n * Creates a persistent session in renderer process using external plugin defined as {@link Persistent}\n * @param {array} args - arguments\n * @param {function} resolve - should called on success\n * @param {function} reject - should called on failure\n * @returns {void}\n */\nDownstreamElectronFE.prototype.downloads.createPersistent = function (args, resolve, reject) {\n  var manifestId = args[0];\n  var config = clonePersistentConfig(args[1]);\n  var forced = args[2];\n  var scope = this;\n  if (this._persistent) {\n    this.downloads.info(manifestId).then(function (info) {\n      if (!info) {\n        reject(\"Manifest with id='\" + manifestId + \"' not found.\");\n        return;\n      }\n      var existingPersistentSessionId = info.persistent;\n      if (existingPersistentSessionId && !forced) {\n        reject('persistent session already exists:' + JSON.stringify(existingPersistentSessionId));\n      } else {\n        if (!config.pssh) {\n          config.pssh = getWidevinePSSH(info);\n        }\n        scope._persistent.createPersistentSession(config).then(function (persistentSessionId) {\n          scope.downloads.savePersistent(manifestId, persistentSessionId).then(function () {\n            if (existingPersistentSessionId) {\n              scope._persistent.removePersistentSession(existingPersistentSessionId).then(function () {\n                resolve(persistentSessionId);\n              })[\"catch\"](function () {\n                resolve(persistentSessionId);\n              });\n            } else {\n              resolve(persistentSessionId);\n            }\n          }, reject);\n        }, reject);\n      }\n    }, reject);\n  } else {\n    reject('No persistent plugin initialized');\n  }\n};\n\n/**\n * Removes a persistent session in renderer process using external plugin defined as {@link Persistent}\n * @param {array} args - arguments\n * @param {function} resolve - should called on success\n * @param {function} reject - should called on failure\n * @param {object} manifest - full information about manifest\n * @returns {void}\n */\nDownstreamElectronFE.prototype.downloads.removePersistent = function (args, resolve, reject, manifest) {\n  if (this._persistent) {\n    if (manifest && manifest.persistent) {\n      this._persistent.removePersistentSession(manifest.persistent).then(resolve, reject);\n    } else {\n      resolve();\n    }\n  } else {\n    reject('No persistent plugin initialized');\n  }\n};\n\n/**\n * Removes a manifest - this is needed on renderer process to check for existence of persistent session\n * and then remove it if necessary\n * @param {array} args - arguments\n * @param {function} resolve - should called on success\n * @param {function} reject - should called on failure\n * @param {object} manifest - full information about manifest\n * @returns {void}\n */\nDownstreamElectronFE.prototype.downloads.remove = function (args, resolve, reject, manifest) {\n  var scope = this;\n  if (this._persistent && manifest && manifest.persistent) {\n    scope._persistent.removePersistentSession(manifest.persistent).then(resolve, reject);\n  } else {\n    resolve();\n  }\n};\n\n/**\n * Removes all manifests - this is needed on renderer process to check for existence of persistent sessions\n * and then remove them if necessary\n * @param {array} args - arguments\n * @param {function} resolve - should called on success\n * @param {function} reject - should called on failure\n * @param {object} manifests - full information about all manifests\n * @returns {void}\n */\nDownstreamElectronFE.prototype.downloads.removeAll = function (args, resolve, reject, manifests) {\n  var scope = this;\n  manifests = manifests || [];\n  var filtered = manifests.filter(function (manifest) {\n    return !!manifest.persistent;\n  });\n  var persistentArr = filtered.map(function (manifest) {\n    return manifest.persistent;\n  });\n  if (this._persistent && persistentArr.length > 0) {\n    var promises = [];\n    for (var i = 0, j = persistentArr.length; i < j; i++) {\n      promises.push(scope._persistent.removePersistentSession(persistentArr[i]));\n    }\n    Promise.all(promises).then(resolve, reject);\n  } else {\n    resolve();\n  }\n};\n\n/**\n * @param {string} method - method name\n * @param {object} args - arguments\n * @param {function} originalMethod - method to ba called on renderer when main process finishes\n * @private\n * @returns {Promise} - promise\n */\nDownstreamElectronFE.prototype._apiCall = function (method, args, originalMethod) {\n  var self = this;\n  var promiseId = this._generatePromiseId();\n  var promise = new Promise(function (resolve, reject) {\n    self._promisesObj[promiseId] = {\n      resolve: resolve,\n      reject: reject,\n      method: method,\n      args: args,\n      originalMethod: originalMethod\n    };\n  });\n  var request = {};\n  request.promiseId = promiseId;\n  request.method = method;\n  request.args = serialize(args);\n  this._send(request);\n  return promise;\n};\n\n/**\n *\n * @private\n * @returns {void}\n */\nDownstreamElectronFE.prototype._attachEvents = function () {\n  var _this = this;\n  this._window.downstreamElectronAPI.receive('downstreamElectronFE', this._processApi);\n  this._window.onbeforeunload = function (e) {\n    _this._beforeUnload();\n    // Unlike usual browsers that a message box will be prompted to users, returning\n    // a non-void value will silently cancel the close.\n    // It is recommended to use the dialog API to let the user confirm closing the\n    // application.\n    e.returnValue = false;\n  };\n};\n\n/**\n *\n * @private\n * @returns {void}\n */\nDownstreamElectronFE.prototype._beforeUnload = function () {\n  this._removeSubscribers();\n};\n\n/**\n *\n * @private\n * @param {string} namespace - namespace\n * @param {array} methods - methods name array\n * @returns {\n * void}\n */\nDownstreamElectronFE.prototype._createApiMethods = function (namespace, methods) {\n  function apiFunction(scope, name, originalMethod) {\n    return function () {\n      return scope._apiCall(name, arguments, originalMethod);\n    };\n  }\n  this[namespace] = this[namespace] || {};\n  function createApiMethod(scope, namespace, name) {\n    var originalMethod;\n    if (typeof scope[namespace][name] === 'function') {\n      originalMethod = scope[namespace][name];\n    }\n    scope[namespace][name] = apiFunction(scope, namespace + '.' + name, originalMethod);\n  }\n  for (var i = 0, j = methods.length; i < j; i++) {\n    createApiMethod(this, namespace, methods[i]);\n  }\n};\n\n/**\n * @private\n * @param {string} subscriberId - subscriber identifier\n * @param {object} err - error\n * @param {object} result - result\n * @param {boolean} subscriberFinished - information if the subscriber is the last one which helps to remove subscribers\n * for finished downloads\n * @returns {void}\n */\nDownstreamElectronFE.prototype._executeSubscriber = function (subscriberId, err, result, subscriberFinished) {\n  var subscriber = this._subscribersId[subscriberId];\n  if (subscriber) {\n    subscriber.callback(err, result);\n  } else {\n    //ignore wrong window\n  }\n  if (subscriberFinished && subscriber) {\n    this._removeLocalSubscribers(subscriber.manifestId);\n  }\n};\n\n/**\n *\n * @private\n * @returns {string} - promise identifier\n */\nDownstreamElectronFE.prototype._generatePromiseId = function () {\n  var ts = new Date().getTime();\n  var promiseId;\n  this._promiseCounter++;\n  promiseId = this._promiseCounter + '-' + ts;\n  return promiseId;\n};\n\n/**\n * @private\n * @param {object} obj - object to be processed\n * @param {object} evt - event\n * @returns {void}\n */\nDownstreamElectronFE.prototype._processApi = function (obj, evt) {\n  var promiseId = evt.promiseId;\n  var error = evt.error;\n  var result = evt.result;\n  var promiseObj = this._promisesObj[promiseId + ''];\n  function resolve(result) {\n    promiseObj.resolve(result);\n    this._removeLocalSubscribersForDefinedMethods(promiseObj.method, promiseObj.args[0] || result);\n  }\n  if (promiseObj) {\n    if (evt.status === 'OK') {\n      if (typeof promiseObj.originalMethod === 'function') {\n        promiseObj.originalMethod.call(this, promiseObj.args, resolve.bind(this), promiseObj.reject.bind(this), result);\n      } else {\n        resolve.call(this, result);\n      }\n    } else {\n      promiseObj.reject(error);\n    }\n    if (evt.subscribersId) {\n      this._saveSubscribersId(promiseObj, evt.subscribersId);\n    }\n    delete this._promisesObj[promiseId];\n  } else if (evt.subscriberId) {\n    this._executeSubscriber(evt.subscriberId, evt.err, result, evt.subscriberFinished);\n  } else {\n    //ignore different window\n  }\n};\n\n/**\n * @private\n * @returns {void}\n */\nDownstreamElectronFE.prototype._removeSubscribers = function () {\n  var request = {};\n  var subscribersId;\n  subscribersId = [];\n  for (var key in this._subscribersId) {\n    if (this._subscribersId.hasOwnProperty(key)) {\n      subscribersId.push(key);\n    }\n  }\n  request.method = 'removeSubscribers';\n  request.args = serialize([subscribersId]);\n  this._send(request);\n};\n\n/**\n * @param {string|array} manifestId - manifest identifier or array of manifests identifier\n * @private\n * @returns {void}\n */\nDownstreamElectronFE.prototype._removeLocalSubscribers = function (manifestId) {\n  var self = this;\n  if (typeof manifestId === 'string') {\n    manifestId = [manifestId];\n  } else if (manifestId instanceof Array) {\n    manifestId = manifestId.map(function (item) {\n      if (typeof item === 'string') {\n        return item;\n      } else {\n        return item.manifestInfo && item.manifestInfo.id;\n      }\n    });\n  }\n  function removeSubscribers(subscriberKey) {\n    for (var i = 0, j = manifestId.length; i < j; i++) {\n      if (typeof self._subscribersId[subscriberKey].manifestId === 'string') {\n        if (self._subscribersId[subscriberKey].manifestId === manifestId[i]) {\n          delete self._subscribersId[subscriberKey];\n          break;\n        }\n      } else {\n        var pos = self._subscribersId[subscriberKey].manifestId.indexOf(manifestId[i]);\n        if (pos >= 0) {\n          self._subscribersId[subscriberKey].manifestId.splice(pos, 1);\n        }\n        if (!self._subscribersId[subscriberKey].manifestId.length) {\n          delete self._subscribersId[subscriberKey];\n          break;\n        }\n      }\n    }\n  }\n  if (manifestId) {\n    for (var key in this._subscribersId) {\n      if (this._subscribersId.hasOwnProperty(key)) {\n        removeSubscribers(key);\n      }\n    }\n  } else {\n    this._subscribersId = {};\n  }\n};\n\n/**\n *\n * @param {string} method - method name\n * @param {string|array} manifestId - manifest identifier or array of manifests identifier\n * @private\n * @returns {void}\n */\nDownstreamElectronFE.prototype._removeLocalSubscribersForDefinedMethods = function (method, manifestId) {\n  var methods = ['downloads.stop', 'downloads.stopAll', 'downloads.remove', 'downloads.removeAll', 'downloads.removeAllUnfinished', 'downloads.unsubscribe'];\n  // remove all subscribers when user removes or stop all\n  if (method === 'downloads.removeAll' || method === 'downloads.stopAll') {\n    manifestId = undefined;\n  }\n  for (var i = 0, j = methods.length; i < j; i++) {\n    if (method === methods[i]) {\n      this._removeLocalSubscribers(manifestId);\n      break;\n    }\n  }\n};\n/**\n * @param {Promise} promise - promise\n * @param {string} subscribersId - subscriber identifier\n * @private\n * @returns {void}\n */\nDownstreamElectronFE.prototype._saveSubscribersId = function (promise, subscribersId) {\n  var i, j;\n  if (typeof subscribersId === 'string' || typeof subscribersId === 'number') {\n    subscribersId = [String(subscribersId)];\n  }\n  for (i = 0, j = subscribersId.length; i < j; i++) {\n    this._subscribersId[subscribersId[i]] = {\n      manifestId: promise.args[0],\n      callback: promise.args[2 + i]\n    };\n  }\n};\n\n/**\n * @param {object} request - request\n * @private\n * @returns {void}\n */\nDownstreamElectronFE.prototype._send = function (request) {\n  try {\n    this._window.downstreamElectronAPI.send('downstreamElectronBE', request);\n  } catch (e) {\n    console.error(e);\n  }\n};\n\n//---------------------------\nmodule.exports = {\n  /**\n   * @function\n   * @name DownstreamElectronFE#init\n   * @param {object} window - window object from renderer window\n   * @param {Persistent} persistent - persistent helper class for creating and removing persistent session\n   * @description\n   * initialize the api in render process\n   * @returns {DownstreamElectronFE} DownstreamElectronFE\n   * @example\n   * // somewhere in the renderer process\n   * // this is example based on persistent plugin from {@link https://castlabs.com/products/prestoplay-desktop/|PRESTOplay for Desktops},\n   * // you can create its own too, for details click on >> {@link Persistent} <<\n   * const persistent = require('./clpp_persistent.plugin.min');\n   * const downstreamElectron = require(\"downstream-electron\").init(window, persistent);\n   */\n  init: function init(window, persistent) {\n    if (!downstreamElectronFE) {\n      downstreamElectronFE = new DownstreamElectronFE(window, persistent);\n    }\n    return downstreamElectronFE;\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d0MscUJBQXFCLENBQUMwQyxJQUFJLENBQUMsc0JBQXNCLEVBQUU3QyxPQUFPLENBQUM7RUFDMUUsQ0FBQyxDQUFDLE9BQU9PLENBQUMsRUFBRTtJQUNWdUMsT0FBTyxDQUFDbEIsS0FBSyxDQUFDckIsQ0FBQyxDQUFDO0VBQ2xCO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBd0MsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDZjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRUMsSUFBSSxFQUFFLFNBQUFBLEtBQVUzRixNQUFNLEVBQUVDLFVBQVUsRUFBRTtJQUNsQyxJQUFJLENBQUN4QyxvQkFBb0IsRUFBRTtNQUN6QkEsb0JBQW9CLEdBQUcsSUFBSXNDLG9CQUFvQixDQUFDQyxNQUFNLEVBQUVDLFVBQVUsQ0FBQztJQUNyRTtJQUNBLE9BQU94QyxvQkFBb0I7RUFDN0I7QUFDRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG93bnN0cmVhbS1lbGVjdHJvbi8uL2FwaS9kb3duc3RyZWFtLWVsZWN0cm9uLWZlLmpzP2I2Y2EiXSwic291cmNlc0NvbnRlbnQiOlsiLyplc2xpbnQgbm8tY29uc29sZTogW1wiZXJyb3JcIiwgeyBhbGxvdzogW1wid2FyblwiLCBcImVycm9yXCIsIFwiaW5mb1wiXSB9XSAqL1xuJ3VzZSBzdHJpY3QnO1xuY29uc3QgV0lERVZJTkVfU0NIRU1FX0lEX1VSSSA9ICd1cm46dXVpZDplZGVmOGJhOS03OWQ2LTRhY2UtYTNjOC0yN2RjZDUxZDIxZWQnO1xuXG5sZXQgZG93bnN0cmVhbUVsZWN0cm9uRkU7XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZSAob2JqKSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmopO1xufVxuXG5mdW5jdGlvbiBnZXRXaWRldmluZVBTU0ggKGluZm8pIHtcbiAgY29uc3QgbWFuaWZlc3RQcm90ZWN0aW9ucyA9IGluZm8ubWFuaWZlc3RJbmZvLnByb3RlY3Rpb25zO1xuICBsZXQgdmlkZW9SZXByZXNlbnRhdGlvbiA9IG1hbmlmZXN0UHJvdGVjdGlvbnMudmlkZW9bMF0gfHwge307XG4gIGlmIChtYW5pZmVzdFByb3RlY3Rpb25zLnZpZGVvICYmIGluZm8ubWFuaWZlc3QudmlkZW8pIHtcbiAgICB2aWRlb1JlcHJlc2VudGF0aW9uID0gbWFuaWZlc3RQcm90ZWN0aW9ucy52aWRlby5maWx0ZXIoZnVuY3Rpb24gKG1hbmlmZXN0UHJvdGVjdGlvbikge1xuICAgICAgcmV0dXJuIGluZm8ubWFuaWZlc3QudmlkZW8uaW5kZXhPZihtYW5pZmVzdFByb3RlY3Rpb24uaWQpID49IDA7XG4gICAgfSk7XG4gICAgdmlkZW9SZXByZXNlbnRhdGlvbiA9IHZpZGVvUmVwcmVzZW50YXRpb25bMF0gfHwge307XG4gIH1cblxuICBjb25zdCBwcm90ZWN0aW9ucyA9IHZpZGVvUmVwcmVzZW50YXRpb24ucHJvdGVjdGlvbnMgfHwgW107XG4gIGxldCB3aWRldmluZVBTU0g7XG4gIGZvciAobGV0IGkgPSAwLCBqID0gcHJvdGVjdGlvbnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgaWYgKHByb3RlY3Rpb25zW2ldLnNjaGVtZUlkVXJpID09PSBXSURFVklORV9TQ0hFTUVfSURfVVJJKSB7XG4gICAgICB3aWRldmluZVBTU0ggPSBwcm90ZWN0aW9uc1tpXS5jZW5jUFNTSDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gd2lkZXZpbmVQU1NIO1xufVxuXG5mdW5jdGlvbiBiaW5kIChzY29wZSwgZikge1xuICByZXR1cm4gZnVuY3Rpb24gYmluZEYgKCkge1xuICAgIGYuYXBwbHkoc2NvcGUsIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGJpbmRBbGwgKHNjb3BlKSB7XG4gIGZvciAobGV0IGkgPSAxLCBqID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgIGxldCBmTmFtZSA9IGFyZ3VtZW50c1tpXTtcbiAgICBzY29wZVtmTmFtZV0gPSBiaW5kKHNjb3BlLCBzY29wZVtmTmFtZV0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNsb25lUGVyc2lzdGVudENvbmZpZyAoY29uZmlnKSB7XG4gIC8vIGRlZXAgY2xvbmUgdGhlIGNvbmZpZ1xuICBjb25zdCBjbG9uZWRDb25maWcgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbmZpZykpO1xuICBpZiAodHlwZW9mIGNvbmZpZy5zZXJ2ZXJDZXJ0aWZpY2F0ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjbG9uZWRDb25maWcuc2VydmVyQ2VydGlmaWNhdGUgPSBjb25maWcuc2VydmVyQ2VydGlmaWNhdGU7XG4gIH1cbiAgaWYgKHR5cGVvZiBjb25maWcubGljZW5zZVJlcXVlc3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjbG9uZWRDb25maWcubGljZW5zZVJlcXVlc3QgPSBjb25maWcubGljZW5zZVJlcXVlc3Q7XG4gIH1cbiAgaWYgKHR5cGVvZiBjb25maWcubGljZW5zZVJlc3BvbnNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2xvbmVkQ29uZmlnLmxpY2Vuc2VSZXNwb25zZSA9IGNvbmZpZy5saWNlbnNlUmVzcG9uc2U7XG4gIH1cblxuICByZXR1cm4gY2xvbmVkQ29uZmlnO1xufVxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQG5hbWVzcGFjZSBEb3duc3RyZWFtRWxlY3Ryb25GRVxuICogQHBhcmFtIHtvYmplY3R9IHdpbmRvdyAtIHdpbmRvdyBvYmplY3QgZnJvbSByZW5kZXJlciB3aW5kb3dcbiAqIEBwYXJhbSB7UGVyc2lzdGVudH0gcGVyc2lzdGVudCAtIHBlcnNpc3RlbnQgaGVscGVyIGNsYXNzIGZvciBjcmVhdGluZyBhbmQgcmVtb3ZpbmcgcGVyc2lzdGVudCBzZXNzaW9uXG4gKiBAcHJvcGVydHkge0Rvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkc30gZG93bmxvYWRzIC0gYXBpIGZvciBkb3dubG9hZHNcbiAqIEBkZXNjcmlwdGlvblxuICogdGhpcyBhIGJyaWRnZSBjbGFzcyBmb3IgW0Rvd25zdHJlYW1FbGVjdHJvbkJFXXtAbGluayBEb3duc3RyZWFtRWxlY3Ryb25CRX1cbiAqIGFsbCBtZXRob2RzIGRlc2NyaWJlZCBpbiAoe0BsaW5rIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkc30pXG4gKi9cbmZ1bmN0aW9uIERvd25zdHJlYW1FbGVjdHJvbkZFICh3aW5kb3csIHBlcnNpc3RlbnQpIHtcbiAgdGhpcy5fcHJvbWlzZXNPYmogPSB7fTtcbiAgdGhpcy5fc3Vic2NyaWJlcnNJZCA9IHt9O1xuICB0aGlzLl9wcm9taXNlQ291bnRlciA9IDA7XG4gIHRoaXMuX3dpbmRvdyA9IHdpbmRvdztcbiAgdGhpcy5fcGVyc2lzdGVudCA9IHBlcnNpc3RlbnQ7XG4gIGJpbmRBbGwodGhpcywgJ19wcm9jZXNzQXBpJywgJ19iZWZvcmVVbmxvYWQnKTtcblxuICB0aGlzLl9jcmVhdGVBcGlNZXRob2RzKCdkb3dubG9hZHMnLCBbXG4gICAgJ2NyZWF0ZScsXG4gICAgJ2NyZWF0ZVBlcnNpc3RlbnQnLFxuICAgICdnZXRGb2xkZXJJbmZvJyxcbiAgICAnZ2V0TGlzdCcsXG4gICAgJ2dldExpc3RXaXRoSW5mbycsXG4gICAgJ2dldE9mZmxpbmVMaW5rJyxcbiAgICAnaW5mbycsXG4gICAgJ3JlbW92ZScsXG4gICAgJ3JlbW92ZUFsbCcsXG4gICAgJ3JlbW92ZUFsbFVuZmluaXNoZWQnLFxuICAgICdyZW1vdmVQZXJzaXN0ZW50JyxcbiAgICAncmVzdW1lJyxcbiAgICAnc2F2ZURhdGEnLFxuICAgICdzYXZlUGVyc2lzdGVudCcsXG4gICAgJ3N0YXJ0JyxcbiAgICAnc3RvcCcsXG4gICAgJ3N0b3BBbGwnLFxuICAgICdzdWJzY3JpYmUnLFxuICAgICd1bnN1YnNjcmliZScsXG4gICAgJ3VwZGF0ZURvd25sb2FkRm9sZGVyJ1xuICBdKTtcbiAgdGhpcy5fYXR0YWNoRXZlbnRzKCk7XG59XG5cbkRvd25zdHJlYW1FbGVjdHJvbkZFLnByb3RvdHlwZS5kb3dubG9hZHMgPSB7fTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgcGVyc2lzdGVudCBzZXNzaW9uIGluIHJlbmRlcmVyIHByb2Nlc3MgdXNpbmcgZXh0ZXJuYWwgcGx1Z2luIGRlZmluZWQgYXMge0BsaW5rIFBlcnNpc3RlbnR9XG4gKiBAcGFyYW0ge2FycmF5fSBhcmdzIC0gYXJndW1lbnRzXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlIC0gc2hvdWxkIGNhbGxlZCBvbiBzdWNjZXNzXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSByZWplY3QgLSBzaG91bGQgY2FsbGVkIG9uIGZhaWx1cmVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3duc3RyZWFtRWxlY3Ryb25GRS5wcm90b3R5cGUuZG93bmxvYWRzLmNyZWF0ZVBlcnNpc3RlbnQgPSBmdW5jdGlvbiAoYXJncywgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gIGNvbnN0IG1hbmlmZXN0SWQgPSBhcmdzWzBdO1xuICBjb25zdCBjb25maWcgPSBjbG9uZVBlcnNpc3RlbnRDb25maWcoYXJnc1sxXSk7XG4gIGNvbnN0IGZvcmNlZCA9IGFyZ3NbMl07XG4gIGNvbnN0IHNjb3BlID0gdGhpcztcbiAgaWYgKHRoaXMuX3BlcnNpc3RlbnQpIHtcbiAgICB0aGlzLmRvd25sb2Fkcy5pbmZvKG1hbmlmZXN0SWQpLnRoZW4oZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgIGlmICghaW5mbykge1xuICAgICAgICByZWplY3QoXCJNYW5pZmVzdCB3aXRoIGlkPSdcIiArIG1hbmlmZXN0SWQgKyBcIicgbm90IGZvdW5kLlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZXhpc3RpbmdQZXJzaXN0ZW50U2Vzc2lvbklkID0gaW5mby5wZXJzaXN0ZW50O1xuICAgICAgaWYgKGV4aXN0aW5nUGVyc2lzdGVudFNlc3Npb25JZCAmJiAhZm9yY2VkKSB7XG4gICAgICAgIHJlamVjdCgncGVyc2lzdGVudCBzZXNzaW9uIGFscmVhZHkgZXhpc3RzOicgKyBKU09OLnN0cmluZ2lmeShleGlzdGluZ1BlcnNpc3RlbnRTZXNzaW9uSWQpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghY29uZmlnLnBzc2gpIHtcbiAgICAgICAgICBjb25maWcucHNzaCA9IGdldFdpZGV2aW5lUFNTSChpbmZvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjb3BlLl9wZXJzaXN0ZW50LmNyZWF0ZVBlcnNpc3RlbnRTZXNzaW9uKGNvbmZpZykudGhlbihmdW5jdGlvbiAocGVyc2lzdGVudFNlc3Npb25JZCkge1xuICAgICAgICAgIHNjb3BlLmRvd25sb2Fkcy5zYXZlUGVyc2lzdGVudChtYW5pZmVzdElkLCBwZXJzaXN0ZW50U2Vzc2lvbklkKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1BlcnNpc3RlbnRTZXNzaW9uSWQpIHtcbiAgICAgICAgICAgICAgc2NvcGUuX3BlcnNpc3RlbnQucmVtb3ZlUGVyc2lzdGVudFNlc3Npb24oZXhpc3RpbmdQZXJzaXN0ZW50U2Vzc2lvbklkKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUocGVyc2lzdGVudFNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwZXJzaXN0ZW50U2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocGVyc2lzdGVudFNlc3Npb25JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgIH1cbiAgICB9LCByZWplY3QpO1xuICB9IGVsc2Uge1xuICAgIHJlamVjdCgnTm8gcGVyc2lzdGVudCBwbHVnaW4gaW5pdGlhbGl6ZWQnKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmVzIGEgcGVyc2lzdGVudCBzZXNzaW9uIGluIHJlbmRlcmVyIHByb2Nlc3MgdXNpbmcgZXh0ZXJuYWwgcGx1Z2luIGRlZmluZWQgYXMge0BsaW5rIFBlcnNpc3RlbnR9XG4gKiBAcGFyYW0ge2FycmF5fSBhcmdzIC0gYXJndW1lbnRzXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlIC0gc2hvdWxkIGNhbGxlZCBvbiBzdWNjZXNzXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSByZWplY3QgLSBzaG91bGQgY2FsbGVkIG9uIGZhaWx1cmVcbiAqIEBwYXJhbSB7b2JqZWN0fSBtYW5pZmVzdCAtIGZ1bGwgaW5mb3JtYXRpb24gYWJvdXQgbWFuaWZlc3RcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3duc3RyZWFtRWxlY3Ryb25GRS5wcm90b3R5cGUuZG93bmxvYWRzLnJlbW92ZVBlcnNpc3RlbnQgPSBmdW5jdGlvbiAoYXJncywgcmVzb2x2ZSwgcmVqZWN0LCBtYW5pZmVzdCkge1xuICBpZiAodGhpcy5fcGVyc2lzdGVudCkge1xuICAgIGlmIChtYW5pZmVzdCAmJiBtYW5pZmVzdC5wZXJzaXN0ZW50KSB7XG4gICAgICB0aGlzLl9wZXJzaXN0ZW50LnJlbW92ZVBlcnNpc3RlbnRTZXNzaW9uKG1hbmlmZXN0LnBlcnNpc3RlbnQpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzb2x2ZSgpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZWplY3QoJ05vIHBlcnNpc3RlbnQgcGx1Z2luIGluaXRpYWxpemVkJyk7XG4gIH1cbn07XG5cbi8qKlxuICogUmVtb3ZlcyBhIG1hbmlmZXN0IC0gdGhpcyBpcyBuZWVkZWQgb24gcmVuZGVyZXIgcHJvY2VzcyB0byBjaGVjayBmb3IgZXhpc3RlbmNlIG9mIHBlcnNpc3RlbnQgc2Vzc2lvblxuICogYW5kIHRoZW4gcmVtb3ZlIGl0IGlmIG5lY2Vzc2FyeVxuICogQHBhcmFtIHthcnJheX0gYXJncyAtIGFyZ3VtZW50c1xuICogQHBhcmFtIHtmdW5jdGlvbn0gcmVzb2x2ZSAtIHNob3VsZCBjYWxsZWQgb24gc3VjY2Vzc1xuICogQHBhcmFtIHtmdW5jdGlvbn0gcmVqZWN0IC0gc2hvdWxkIGNhbGxlZCBvbiBmYWlsdXJlXG4gKiBAcGFyYW0ge29iamVjdH0gbWFuaWZlc3QgLSBmdWxsIGluZm9ybWF0aW9uIGFib3V0IG1hbmlmZXN0XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uRkUucHJvdG90eXBlLmRvd25sb2Fkcy5yZW1vdmUgPSBmdW5jdGlvbiAoYXJncywgcmVzb2x2ZSwgcmVqZWN0LCBtYW5pZmVzdCkge1xuICBjb25zdCBzY29wZSA9IHRoaXM7XG4gIGlmICh0aGlzLl9wZXJzaXN0ZW50ICYmIG1hbmlmZXN0ICYmIG1hbmlmZXN0LnBlcnNpc3RlbnQpIHtcbiAgICBzY29wZS5fcGVyc2lzdGVudC5yZW1vdmVQZXJzaXN0ZW50U2Vzc2lvbihtYW5pZmVzdC5wZXJzaXN0ZW50KS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gIH0gZWxzZSB7XG4gICAgcmVzb2x2ZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYWxsIG1hbmlmZXN0cyAtIHRoaXMgaXMgbmVlZGVkIG9uIHJlbmRlcmVyIHByb2Nlc3MgdG8gY2hlY2sgZm9yIGV4aXN0ZW5jZSBvZiBwZXJzaXN0ZW50IHNlc3Npb25zXG4gKiBhbmQgdGhlbiByZW1vdmUgdGhlbSBpZiBuZWNlc3NhcnlcbiAqIEBwYXJhbSB7YXJyYXl9IGFyZ3MgLSBhcmd1bWVudHNcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmUgLSBzaG91bGQgY2FsbGVkIG9uIHN1Y2Nlc3NcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHJlamVjdCAtIHNob3VsZCBjYWxsZWQgb24gZmFpbHVyZVxuICogQHBhcmFtIHtvYmplY3R9IG1hbmlmZXN0cyAtIGZ1bGwgaW5mb3JtYXRpb24gYWJvdXQgYWxsIG1hbmlmZXN0c1xuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25zdHJlYW1FbGVjdHJvbkZFLnByb3RvdHlwZS5kb3dubG9hZHMucmVtb3ZlQWxsID0gZnVuY3Rpb24gKGFyZ3MsIHJlc29sdmUsIHJlamVjdCwgbWFuaWZlc3RzKSB7XG4gIGNvbnN0IHNjb3BlID0gdGhpcztcbiAgbWFuaWZlc3RzID0gbWFuaWZlc3RzIHx8IFtdO1xuICBjb25zdCBmaWx0ZXJlZCA9IG1hbmlmZXN0cy5maWx0ZXIoZnVuY3Rpb24gKG1hbmlmZXN0KSB7XG4gICAgcmV0dXJuICEhbWFuaWZlc3QucGVyc2lzdGVudDtcbiAgfSk7XG4gIGNvbnN0IHBlcnNpc3RlbnRBcnIgPSBmaWx0ZXJlZC5tYXAoZnVuY3Rpb24gKG1hbmlmZXN0KSB7XG4gICAgcmV0dXJuIG1hbmlmZXN0LnBlcnNpc3RlbnQ7XG4gIH0pO1xuXG4gIGlmICh0aGlzLl9wZXJzaXN0ZW50ICYmIHBlcnNpc3RlbnRBcnIubGVuZ3RoID4gMCkge1xuICAgIGxldCBwcm9taXNlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwLCBqID0gcGVyc2lzdGVudEFyci5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIHByb21pc2VzLnB1c2goc2NvcGUuX3BlcnNpc3RlbnQucmVtb3ZlUGVyc2lzdGVudFNlc3Npb24ocGVyc2lzdGVudEFycltpXSkpO1xuICAgIH1cbiAgICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICB9IGVsc2Uge1xuICAgIHJlc29sdmUoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kIC0gbWV0aG9kIG5hbWVcbiAqIEBwYXJhbSB7b2JqZWN0fSBhcmdzIC0gYXJndW1lbnRzXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBvcmlnaW5hbE1ldGhvZCAtIG1ldGhvZCB0byBiYSBjYWxsZWQgb24gcmVuZGVyZXIgd2hlbiBtYWluIHByb2Nlc3MgZmluaXNoZXNcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBwcm9taXNlXG4gKi9cbkRvd25zdHJlYW1FbGVjdHJvbkZFLnByb3RvdHlwZS5fYXBpQ2FsbCA9IGZ1bmN0aW9uIChtZXRob2QsIGFyZ3MsIG9yaWdpbmFsTWV0aG9kKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuICBjb25zdCBwcm9taXNlSWQgPSB0aGlzLl9nZW5lcmF0ZVByb21pc2VJZCgpO1xuICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHNlbGYuX3Byb21pc2VzT2JqW3Byb21pc2VJZF0gPSB7XG4gICAgICByZXNvbHZlOiByZXNvbHZlLFxuICAgICAgcmVqZWN0OiByZWplY3QsXG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIGFyZ3M6IGFyZ3MsXG4gICAgICBvcmlnaW5hbE1ldGhvZDogb3JpZ2luYWxNZXRob2RcbiAgICB9O1xuICB9KTtcbiAgbGV0IHJlcXVlc3QgPSB7fTtcbiAgcmVxdWVzdC5wcm9taXNlSWQgPSBwcm9taXNlSWQ7XG4gIHJlcXVlc3QubWV0aG9kID0gbWV0aG9kO1xuICByZXF1ZXN0LmFyZ3MgPSBzZXJpYWxpemUoYXJncyk7XG4gIHRoaXMuX3NlbmQocmVxdWVzdCk7XG4gIHJldHVybiBwcm9taXNlO1xufTtcblxuLyoqXG4gKlxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3duc3RyZWFtRWxlY3Ryb25GRS5wcm90b3R5cGUuX2F0dGFjaEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fd2luZG93LmRvd25zdHJlYW1FbGVjdHJvbkFQSS5yZWNlaXZlKCdkb3duc3RyZWFtRWxlY3Ryb25GRScsIHRoaXMuX3Byb2Nlc3NBcGkpO1xuICB0aGlzLl93aW5kb3cub25iZWZvcmV1bmxvYWQgPSAoZSkgPT4ge1xuICAgIHRoaXMuX2JlZm9yZVVubG9hZCgpO1xuICAgIC8vIFVubGlrZSB1c3VhbCBicm93c2VycyB0aGF0IGEgbWVzc2FnZSBib3ggd2lsbCBiZSBwcm9tcHRlZCB0byB1c2VycywgcmV0dXJuaW5nXG4gICAgLy8gYSBub24tdm9pZCB2YWx1ZSB3aWxsIHNpbGVudGx5IGNhbmNlbCB0aGUgY2xvc2UuXG4gICAgLy8gSXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSBkaWFsb2cgQVBJIHRvIGxldCB0aGUgdXNlciBjb25maXJtIGNsb3NpbmcgdGhlXG4gICAgLy8gYXBwbGljYXRpb24uXG4gICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlXG4gIH1cbn07XG5cbi8qKlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uRkUucHJvdG90eXBlLl9iZWZvcmVVbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX3JlbW92ZVN1YnNjcmliZXJzKCk7XG59O1xuXG4vKipcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVzcGFjZSAtIG5hbWVzcGFjZVxuICogQHBhcmFtIHthcnJheX0gbWV0aG9kcyAtIG1ldGhvZHMgbmFtZSBhcnJheVxuICogQHJldHVybnMge1xuICogdm9pZH1cbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uRkUucHJvdG90eXBlLl9jcmVhdGVBcGlNZXRob2RzID0gZnVuY3Rpb24gKG5hbWVzcGFjZSwgbWV0aG9kcykge1xuICBmdW5jdGlvbiBhcGlGdW5jdGlvbiAoc2NvcGUsIG5hbWUsIG9yaWdpbmFsTWV0aG9kKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBzY29wZS5fYXBpQ2FsbChuYW1lLCBhcmd1bWVudHMsIG9yaWdpbmFsTWV0aG9kKTtcbiAgICB9O1xuICB9XG5cbiAgdGhpc1tuYW1lc3BhY2VdID0gdGhpc1tuYW1lc3BhY2VdIHx8IHt9O1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUFwaU1ldGhvZCAoc2NvcGUsIG5hbWVzcGFjZSwgbmFtZSkge1xuICAgIGxldCBvcmlnaW5hbE1ldGhvZDtcbiAgICBpZiAodHlwZW9mIHNjb3BlW25hbWVzcGFjZV1bbmFtZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9yaWdpbmFsTWV0aG9kID0gc2NvcGVbbmFtZXNwYWNlXVtuYW1lXTtcbiAgICB9XG4gICAgc2NvcGVbbmFtZXNwYWNlXVtuYW1lXSA9IGFwaUZ1bmN0aW9uKHNjb3BlLCBuYW1lc3BhY2UgKyAnLicgKyBuYW1lLCBvcmlnaW5hbE1ldGhvZCk7XG4gIH1cblxuICBmb3IgKGxldCBpID0gMCwgaiA9IG1ldGhvZHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgY3JlYXRlQXBpTWV0aG9kKHRoaXMsIG5hbWVzcGFjZSwgbWV0aG9kc1tpXSk7XG4gIH1cbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdWJzY3JpYmVySWQgLSBzdWJzY3JpYmVyIGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSBlcnIgLSBlcnJvclxuICogQHBhcmFtIHtvYmplY3R9IHJlc3VsdCAtIHJlc3VsdFxuICogQHBhcmFtIHtib29sZWFufSBzdWJzY3JpYmVyRmluaXNoZWQgLSBpbmZvcm1hdGlvbiBpZiB0aGUgc3Vic2NyaWJlciBpcyB0aGUgbGFzdCBvbmUgd2hpY2ggaGVscHMgdG8gcmVtb3ZlIHN1YnNjcmliZXJzXG4gKiBmb3IgZmluaXNoZWQgZG93bmxvYWRzXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uRkUucHJvdG90eXBlLl9leGVjdXRlU3Vic2NyaWJlciA9IGZ1bmN0aW9uIChzdWJzY3JpYmVySWQsIGVyciwgcmVzdWx0LCBzdWJzY3JpYmVyRmluaXNoZWQpIHtcbiAgY29uc3Qgc3Vic2NyaWJlciA9IHRoaXMuX3N1YnNjcmliZXJzSWRbc3Vic2NyaWJlcklkXTtcbiAgaWYgKHN1YnNjcmliZXIpIHtcbiAgICBzdWJzY3JpYmVyLmNhbGxiYWNrKGVyciwgcmVzdWx0KTtcbiAgfSBlbHNlIHtcbiAgICAvL2lnbm9yZSB3cm9uZyB3aW5kb3dcbiAgfVxuICBpZiAoc3Vic2NyaWJlckZpbmlzaGVkICYmIHN1YnNjcmliZXIpIHtcbiAgICB0aGlzLl9yZW1vdmVMb2NhbFN1YnNjcmliZXJzKHN1YnNjcmliZXIubWFuaWZlc3RJZCk7XG4gIH1cbn07XG5cbi8qKlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7c3RyaW5nfSAtIHByb21pc2UgaWRlbnRpZmllclxuICovXG5Eb3duc3RyZWFtRWxlY3Ryb25GRS5wcm90b3R5cGUuX2dlbmVyYXRlUHJvbWlzZUlkID0gZnVuY3Rpb24gKCkge1xuICBsZXQgdHMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgbGV0IHByb21pc2VJZDtcbiAgdGhpcy5fcHJvbWlzZUNvdW50ZXIrKztcbiAgcHJvbWlzZUlkID0gdGhpcy5fcHJvbWlzZUNvdW50ZXIgKyAnLScgKyB0cztcbiAgcmV0dXJuIHByb21pc2VJZDtcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBvYmogLSBvYmplY3QgdG8gYmUgcHJvY2Vzc2VkXG4gKiBAcGFyYW0ge29iamVjdH0gZXZ0IC0gZXZlbnRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3duc3RyZWFtRWxlY3Ryb25GRS5wcm90b3R5cGUuX3Byb2Nlc3NBcGkgPSBmdW5jdGlvbiAob2JqLCBldnQpIHtcbiAgY29uc3QgcHJvbWlzZUlkID0gZXZ0LnByb21pc2VJZDtcbiAgY29uc3QgZXJyb3IgPSBldnQuZXJyb3I7XG4gIGNvbnN0IHJlc3VsdCA9IGV2dC5yZXN1bHQ7XG4gIGNvbnN0IHByb21pc2VPYmogPSB0aGlzLl9wcm9taXNlc09ialtwcm9taXNlSWQgKyAnJ107XG5cbiAgZnVuY3Rpb24gcmVzb2x2ZSAocmVzdWx0KSB7XG4gICAgcHJvbWlzZU9iai5yZXNvbHZlKHJlc3VsdCk7XG4gICAgdGhpcy5fcmVtb3ZlTG9jYWxTdWJzY3JpYmVyc0ZvckRlZmluZWRNZXRob2RzKHByb21pc2VPYmoubWV0aG9kLCBwcm9taXNlT2JqLmFyZ3NbMF0gfHwgcmVzdWx0KTtcbiAgfVxuXG4gIGlmIChwcm9taXNlT2JqKSB7XG4gICAgaWYgKGV2dC5zdGF0dXMgPT09ICdPSycpIHtcbiAgICAgIGlmICh0eXBlb2YgcHJvbWlzZU9iai5vcmlnaW5hbE1ldGhvZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwcm9taXNlT2JqLm9yaWdpbmFsTWV0aG9kLmNhbGwodGhpcywgcHJvbWlzZU9iai5hcmdzLCByZXNvbHZlLmJpbmQodGhpcyksIHByb21pc2VPYmoucmVqZWN0LmJpbmQodGhpcyksIHJlc3VsdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlLmNhbGwodGhpcywgcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcHJvbWlzZU9iai5yZWplY3QoZXJyb3IpO1xuICAgIH1cbiAgICBpZiAoZXZ0LnN1YnNjcmliZXJzSWQpIHtcbiAgICAgIHRoaXMuX3NhdmVTdWJzY3JpYmVyc0lkKHByb21pc2VPYmosIGV2dC5zdWJzY3JpYmVyc0lkKTtcbiAgICB9XG4gICAgZGVsZXRlICh0aGlzLl9wcm9taXNlc09ialtwcm9taXNlSWRdKTtcbiAgfSBlbHNlIGlmIChldnQuc3Vic2NyaWJlcklkKSB7XG4gICAgdGhpcy5fZXhlY3V0ZVN1YnNjcmliZXIoZXZ0LnN1YnNjcmliZXJJZCwgZXZ0LmVyciwgcmVzdWx0LCBldnQuc3Vic2NyaWJlckZpbmlzaGVkKTtcbiAgfSBlbHNlIHtcbiAgICAvL2lnbm9yZSBkaWZmZXJlbnQgd2luZG93XG4gIH1cbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3duc3RyZWFtRWxlY3Ryb25GRS5wcm90b3R5cGUuX3JlbW92ZVN1YnNjcmliZXJzID0gZnVuY3Rpb24gKCkge1xuICBsZXQgcmVxdWVzdCA9IHt9O1xuICBsZXQgc3Vic2NyaWJlcnNJZDtcbiAgc3Vic2NyaWJlcnNJZCA9IFtdO1xuICBmb3IgKGxldCBrZXkgaW4gdGhpcy5fc3Vic2NyaWJlcnNJZCkge1xuICAgIGlmICh0aGlzLl9zdWJzY3JpYmVyc0lkLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHN1YnNjcmliZXJzSWQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXF1ZXN0Lm1ldGhvZCA9ICdyZW1vdmVTdWJzY3JpYmVycyc7XG4gIHJlcXVlc3QuYXJncyA9IHNlcmlhbGl6ZShbc3Vic2NyaWJlcnNJZF0pO1xuXG4gIHRoaXMuX3NlbmQocmVxdWVzdCk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfGFycmF5fSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllciBvciBhcnJheSBvZiBtYW5pZmVzdHMgaWRlbnRpZmllclxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3duc3RyZWFtRWxlY3Ryb25GRS5wcm90b3R5cGUuX3JlbW92ZUxvY2FsU3Vic2NyaWJlcnMgPSBmdW5jdGlvbiAobWFuaWZlc3RJZCkge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgaWYgKHR5cGVvZiBtYW5pZmVzdElkID09PSAnc3RyaW5nJykge1xuICAgIG1hbmlmZXN0SWQgPSBbbWFuaWZlc3RJZF07XG4gIH0gZWxzZSBpZiAobWFuaWZlc3RJZCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgbWFuaWZlc3RJZCA9IG1hbmlmZXN0SWQubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0ubWFuaWZlc3RJbmZvICYmIGl0ZW0ubWFuaWZlc3RJbmZvLmlkO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlU3Vic2NyaWJlcnMgKHN1YnNjcmliZXJLZXkpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IG1hbmlmZXN0SWQubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICBpZiAodHlwZW9mIHNlbGYuX3N1YnNjcmliZXJzSWRbc3Vic2NyaWJlcktleV0ubWFuaWZlc3RJZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKHNlbGYuX3N1YnNjcmliZXJzSWRbc3Vic2NyaWJlcktleV0ubWFuaWZlc3RJZCA9PT0gbWFuaWZlc3RJZFtpXSkge1xuICAgICAgICAgIGRlbGV0ZSAoc2VsZi5fc3Vic2NyaWJlcnNJZFtzdWJzY3JpYmVyS2V5XSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBwb3MgPSBzZWxmLl9zdWJzY3JpYmVyc0lkW3N1YnNjcmliZXJLZXldLm1hbmlmZXN0SWQuaW5kZXhPZihtYW5pZmVzdElkW2ldKTtcbiAgICAgICAgaWYgKHBvcyA+PSAwKSB7XG4gICAgICAgICAgc2VsZi5fc3Vic2NyaWJlcnNJZFtzdWJzY3JpYmVyS2V5XS5tYW5pZmVzdElkLnNwbGljZShwb3MsIDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2VsZi5fc3Vic2NyaWJlcnNJZFtzdWJzY3JpYmVyS2V5XS5tYW5pZmVzdElkLmxlbmd0aCkge1xuICAgICAgICAgIGRlbGV0ZSAoc2VsZi5fc3Vic2NyaWJlcnNJZFtzdWJzY3JpYmVyS2V5XSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAobWFuaWZlc3RJZCkge1xuICAgIGZvciAobGV0IGtleSBpbiB0aGlzLl9zdWJzY3JpYmVyc0lkKSB7XG4gICAgICBpZiAodGhpcy5fc3Vic2NyaWJlcnNJZC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIHJlbW92ZVN1YnNjcmliZXJzKGtleSk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRoaXMuX3N1YnNjcmliZXJzSWQgPSB7fTtcbiAgfVxufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZCAtIG1ldGhvZCBuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ3xhcnJheX0gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXIgb3IgYXJyYXkgb2YgbWFuaWZlc3RzIGlkZW50aWZpZXJcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uRkUucHJvdG90eXBlLl9yZW1vdmVMb2NhbFN1YnNjcmliZXJzRm9yRGVmaW5lZE1ldGhvZHMgPSBmdW5jdGlvbiAobWV0aG9kLCBtYW5pZmVzdElkKSB7XG4gIGNvbnN0IG1ldGhvZHMgPSBbXG4gICAgJ2Rvd25sb2Fkcy5zdG9wJyxcbiAgICAnZG93bmxvYWRzLnN0b3BBbGwnLFxuICAgICdkb3dubG9hZHMucmVtb3ZlJyxcbiAgICAnZG93bmxvYWRzLnJlbW92ZUFsbCcsXG4gICAgJ2Rvd25sb2Fkcy5yZW1vdmVBbGxVbmZpbmlzaGVkJyxcbiAgICAnZG93bmxvYWRzLnVuc3Vic2NyaWJlJ1xuICBdO1xuICAvLyByZW1vdmUgYWxsIHN1YnNjcmliZXJzIHdoZW4gdXNlciByZW1vdmVzIG9yIHN0b3AgYWxsXG4gIGlmIChtZXRob2QgPT09ICdkb3dubG9hZHMucmVtb3ZlQWxsJyB8fCBtZXRob2QgPT09ICdkb3dubG9hZHMuc3RvcEFsbCcpIHtcbiAgICBtYW5pZmVzdElkID0gdW5kZWZpbmVkO1xuICB9XG4gIGZvciAobGV0IGkgPSAwLCBqID0gbWV0aG9kcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBpZiAobWV0aG9kID09PSBtZXRob2RzW2ldKSB7XG4gICAgICB0aGlzLl9yZW1vdmVMb2NhbFN1YnNjcmliZXJzKG1hbmlmZXN0SWQpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59O1xuLyoqXG4gKiBAcGFyYW0ge1Byb21pc2V9IHByb21pc2UgLSBwcm9taXNlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaWJlcnNJZCAtIHN1YnNjcmliZXIgaWRlbnRpZmllclxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3duc3RyZWFtRWxlY3Ryb25GRS5wcm90b3R5cGUuX3NhdmVTdWJzY3JpYmVyc0lkID0gZnVuY3Rpb24gKHByb21pc2UsIHN1YnNjcmliZXJzSWQpIHtcbiAgbGV0IGksIGo7XG4gIGlmICh0eXBlb2Ygc3Vic2NyaWJlcnNJZCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHN1YnNjcmliZXJzSWQgPT09ICdudW1iZXInKSB7XG4gICAgc3Vic2NyaWJlcnNJZCA9IFtTdHJpbmcoc3Vic2NyaWJlcnNJZCldO1xuICB9XG4gIGZvciAoaSA9IDAsIGogPSBzdWJzY3JpYmVyc0lkLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgIHRoaXMuX3N1YnNjcmliZXJzSWRbc3Vic2NyaWJlcnNJZFtpXV0gPSB7XG4gICAgICBtYW5pZmVzdElkOiBwcm9taXNlLmFyZ3NbMF0sXG4gICAgICBjYWxsYmFjazogcHJvbWlzZS5hcmdzWzIgKyBpXVxuICAgIH07XG4gIH1cblxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gcmVxdWVzdCAtIHJlcXVlc3RcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uRkUucHJvdG90eXBlLl9zZW5kID0gZnVuY3Rpb24gKHJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICB0aGlzLl93aW5kb3cuZG93bnN0cmVhbUVsZWN0cm9uQVBJLnNlbmQoJ2Rvd25zdHJlYW1FbGVjdHJvbkJFJywgcmVxdWVzdCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKGUpO1xuICB9XG59O1xuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8qKlxuICAgKiBAZnVuY3Rpb25cbiAgICogQG5hbWUgRG93bnN0cmVhbUVsZWN0cm9uRkUjaW5pdFxuICAgKiBAcGFyYW0ge29iamVjdH0gd2luZG93IC0gd2luZG93IG9iamVjdCBmcm9tIHJlbmRlcmVyIHdpbmRvd1xuICAgKiBAcGFyYW0ge1BlcnNpc3RlbnR9IHBlcnNpc3RlbnQgLSBwZXJzaXN0ZW50IGhlbHBlciBjbGFzcyBmb3IgY3JlYXRpbmcgYW5kIHJlbW92aW5nIHBlcnNpc3RlbnQgc2Vzc2lvblxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogaW5pdGlhbGl6ZSB0aGUgYXBpIGluIHJlbmRlciBwcm9jZXNzXG4gICAqIEByZXR1cm5zIHtEb3duc3RyZWFtRWxlY3Ryb25GRX0gRG93bnN0cmVhbUVsZWN0cm9uRkVcbiAgICogQGV4YW1wbGVcbiAgICogLy8gc29tZXdoZXJlIGluIHRoZSByZW5kZXJlciBwcm9jZXNzXG4gICAqIC8vIHRoaXMgaXMgZXhhbXBsZSBiYXNlZCBvbiBwZXJzaXN0ZW50IHBsdWdpbiBmcm9tIHtAbGluayBodHRwczovL2Nhc3RsYWJzLmNvbS9wcm9kdWN0cy9wcmVzdG9wbGF5LWRlc2t0b3AvfFBSRVNUT3BsYXkgZm9yIERlc2t0b3BzfSxcbiAgICogLy8geW91IGNhbiBjcmVhdGUgaXRzIG93biB0b28sIGZvciBkZXRhaWxzIGNsaWNrIG9uID4+IHtAbGluayBQZXJzaXN0ZW50fSA8PFxuICAgKiBjb25zdCBwZXJzaXN0ZW50ID0gcmVxdWlyZSgnLi9jbHBwX3BlcnNpc3RlbnQucGx1Z2luLm1pbicpO1xuICAgKiBjb25zdCBkb3duc3RyZWFtRWxlY3Ryb24gPSByZXF1aXJlKFwiZG93bnN0cmVhbS1lbGVjdHJvblwiKS5pbml0KHdpbmRvdywgcGVyc2lzdGVudCk7XG4gICAqL1xuICBpbml0OiBmdW5jdGlvbiAod2luZG93LCBwZXJzaXN0ZW50KSB7XG4gICAgaWYgKCFkb3duc3RyZWFtRWxlY3Ryb25GRSkge1xuICAgICAgZG93bnN0cmVhbUVsZWN0cm9uRkUgPSBuZXcgRG93bnN0cmVhbUVsZWN0cm9uRkUod2luZG93LCBwZXJzaXN0ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGRvd25zdHJlYW1FbGVjdHJvbkZFO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbIldJREVWSU5FX1NDSEVNRV9JRF9VUkkiLCJkb3duc3RyZWFtRWxlY3Ryb25GRSIsInNlcmlhbGl6ZSIsIm9iaiIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRXaWRldmluZVBTU0giLCJpbmZvIiwibWFuaWZlc3RQcm90ZWN0aW9ucyIsIm1hbmlmZXN0SW5mbyIsInByb3RlY3Rpb25zIiwidmlkZW9SZXByZXNlbnRhdGlvbiIsInZpZGVvIiwibWFuaWZlc3QiLCJmaWx0ZXIiLCJtYW5pZmVzdFByb3RlY3Rpb24iLCJpbmRleE9mIiwiaWQiLCJ3aWRldmluZVBTU0giLCJpIiwiaiIsImxlbmd0aCIsInNjaGVtZUlkVXJpIiwiY2VuY1BTU0giLCJiaW5kIiwic2NvcGUiLCJmIiwiYmluZEYiLCJhcHBseSIsImFyZ3VtZW50cyIsImJpbmRBbGwiLCJmTmFtZSIsImNsb25lUGVyc2lzdGVudENvbmZpZyIsImNvbmZpZyIsImNsb25lZENvbmZpZyIsInBhcnNlIiwic2VydmVyQ2VydGlmaWNhdGUiLCJsaWNlbnNlUmVxdWVzdCIsImxpY2Vuc2VSZXNwb25zZSIsIkRvd25zdHJlYW1FbGVjdHJvbkZFIiwid2luZG93IiwicGVyc2lzdGVudCIsIl9wcm9taXNlc09iaiIsIl9zdWJzY3JpYmVyc0lkIiwiX3Byb21pc2VDb3VudGVyIiwiX3dpbmRvdyIsIl9wZXJzaXN0ZW50IiwiX2NyZWF0ZUFwaU1ldGhvZHMiLCJfYXR0YWNoRXZlbnRzIiwicHJvdG90eXBlIiwiZG93bmxvYWRzIiwiY3JlYXRlUGVyc2lzdGVudCIsImFyZ3MiLCJyZXNvbHZlIiwicmVqZWN0IiwibWFuaWZlc3RJZCIsImZvcmNlZCIsInRoZW4iLCJleGlzdGluZ1BlcnNpc3RlbnRTZXNzaW9uSWQiLCJwc3NoIiwiY3JlYXRlUGVyc2lzdGVudFNlc3Npb24iLCJwZXJzaXN0ZW50U2Vzc2lvbklkIiwic2F2ZVBlcnNpc3RlbnQiLCJyZW1vdmVQZXJzaXN0ZW50U2Vzc2lvbiIsInJlbW92ZVBlcnNpc3RlbnQiLCJyZW1vdmUiLCJyZW1vdmVBbGwiLCJtYW5pZmVzdHMiLCJmaWx0ZXJlZCIsInBlcnNpc3RlbnRBcnIiLCJtYXAiLCJwcm9taXNlcyIsInB1c2giLCJQcm9taXNlIiwiYWxsIiwiX2FwaUNhbGwiLCJtZXRob2QiLCJvcmlnaW5hbE1ldGhvZCIsInNlbGYiLCJwcm9taXNlSWQiLCJfZ2VuZXJhdGVQcm9taXNlSWQiLCJwcm9taXNlIiwicmVxdWVzdCIsIl9zZW5kIiwiX3RoaXMiLCJkb3duc3RyZWFtRWxlY3Ryb25BUEkiLCJyZWNlaXZlIiwiX3Byb2Nlc3NBcGkiLCJvbmJlZm9yZXVubG9hZCIsImUiLCJfYmVmb3JlVW5sb2FkIiwicmV0dXJuVmFsdWUiLCJfcmVtb3ZlU3Vic2NyaWJlcnMiLCJuYW1lc3BhY2UiLCJtZXRob2RzIiwiYXBpRnVuY3Rpb24iLCJuYW1lIiwiY3JlYXRlQXBpTWV0aG9kIiwiX2V4ZWN1dGVTdWJzY3JpYmVyIiwic3Vic2NyaWJlcklkIiwiZXJyIiwicmVzdWx0Iiwic3Vic2NyaWJlckZpbmlzaGVkIiwic3Vic2NyaWJlciIsImNhbGxiYWNrIiwiX3JlbW92ZUxvY2FsU3Vic2NyaWJlcnMiLCJ0cyIsIkRhdGUiLCJnZXRUaW1lIiwiZXZ0IiwiZXJyb3IiLCJwcm9taXNlT2JqIiwiX3JlbW92ZUxvY2FsU3Vic2NyaWJlcnNGb3JEZWZpbmVkTWV0aG9kcyIsInN0YXR1cyIsImNhbGwiLCJzdWJzY3JpYmVyc0lkIiwiX3NhdmVTdWJzY3JpYmVyc0lkIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJBcnJheSIsIml0ZW0iLCJyZW1vdmVTdWJzY3JpYmVycyIsInN1YnNjcmliZXJLZXkiLCJwb3MiLCJzcGxpY2UiLCJ1bmRlZmluZWQiLCJTdHJpbmciLCJzZW5kIiwiY29uc29sZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJpbml0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5434\n")}},__webpack_module_cache__={};function __webpack_require__(Q){var B=__webpack_module_cache__[Q];if(void 0!==B)return B.exports;var F=__webpack_module_cache__[Q]={exports:{}};return __webpack_modules__[Q](F,F.exports,__webpack_require__),F.exports}var __webpack_exports__=__webpack_require__(5434);return __webpack_exports__})()));